{"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"GenDelNote":{"sourceUuid":"5eaa3593-f2db-4c8d-a3e9-0439186d4c02","name":"GenDelNote","program":"EXT001MI","description":"GenPickingList","active":true,"multi":true,"modified":1723825429132,"modifiedBy":"INFNIXONG","outputFields":[{"name":"TEXT","description":"text","length":600,"mandatory":false,"type":"A"}],"inputFields":[{"name":"CONO","description":"company","length":3,"mandatory":false,"type":"N"},{"name":"DLIX","description":"delivery number","length":11,"mandatory":false,"type":"N"},{"name":"CONN","description":"shipment","length":7,"mandatory":false,"type":"N"}],"utilities":[],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"5eaa3593-f2db-4c8d-a3e9-0439186d4c02":{"uuid":"5eaa3593-f2db-4c8d-a3e9-0439186d4c02","updated":1724928395296,"updatedBy":"INFNIXONG","created":1723624780308,"createdBy":"INFNIXONG","apiVersion":"0.21","beVersion":"16.0.0.20240621022400.6","language":"GROOVY","codeHash":"B4116A16163C5C49B820B4955F5C5D4E0151943CA4761CBEA6D3E3C0E7D4BFED","code":"LyoqDQoqICBATmFtZTogRVhUMDAxTUkuR2VuRGVsTm90ZQ0KKiAgQERlc2NyaXB0aW9uOiBFeHRlbmRPdXRwdXQgZm9yIE1NUzQ4MFBGL01XUzYyMFBGDQoqICBAQXV0aG9yczogTml4b24gUG93ZXIgT25nDQoqLw0KDQovKioNCiogQ0hBTkdFTE9HUw0KKiBWZXJzaW9uICAgIERhdGUgICAgVXNlciAgICAgICAgICAgICAgIERlc2NyaXB0aW9uDQoqIDEuMC4wICAgICAgMjQwMzE1ICBOaXhvbiBQb3dlciBPbmcgICAgSW5pdGlhbCBSZWxlYXNlDQoqIDEuMC4xICAgICAgMjQwNTA4ICBOaXhvbiBQb3dlciBPbmcgICAgQWZ0ZXIgWHRlbmRNMyByZXZpZXcNCiogMS4xLjAgICAgICAyNDA1MjMgIE5peG9uIFBvd2VyIE9uZyAgICBBZGRpdGlvbmFsIGxvZ2ljDQoqIDEuMS4xICAgICAgMjQwNTI4ICBOaXhvbiBQb3dlciBPbmcgICAgQ2hhbmdlZCBzbmFrZSBjYXNlIHZhcmlhYmxlIHRvIGxvd2VyIGNhbWVsIGNhc2UNCiogMS4xLjIgICAgICAyNDA2MDYgIE5peG9uIFBvd2VyIE9uZyAgICBBZGRlZCBsb2dpYyBmb3IgTTAxIE1NUzQ4MFBGDQoqIDEuMS4zICAgICAgMjQwNjA3ICBOaXhvbiBQb3dlciBPbmcgICAgQ2FzdCBJVE5PIHRvIFN0cmluZw0KKiAxLjEuNCAgICAgIDI0MDYyMCAgTml4b24gUG93ZXIgT25nICAgIENvdW50IHBhZ2UgcGVyIHR5cGUgMSwyLDM7IEFkZGVkIFBMUVQgTU1TNDgwUEYNCiogMS4xLjUgICAgICAyNDA3MDUgIE5peG9uIFBvd2VyIE9uZyAgICBBZGRlZCBuZXcgZmllbGRzIGZvciBNTVM0ODBQRiBFWFQ0ODAgdGFibGUNCiogMS4xLjYgICAgICAyNDA3MTEgIE5peG9uIFBvd2VyIE9uZyAgICBBZGRlZCBTRVFOIGZvciBFWFQ0ODANCiogMS4xLjcgICAgICAyNDA3MjIgIE5peG9uIFBvd2VyIE9uZyAgICBBZGRlZCBsb2dpYyBmb3IgQVJTMTk5UEZ2MQ0KKiAyLjAuMCAgICAgIDI0MDcyOSAgTml4b24gUG93ZXIgT25nICAgIEFkZGVkIENPQUYgZm9yIEVYVDQzNCw0MzUsNDM2IFBpY2tpbmcgTGlzdA0KKiAyLjAuMSAgICAgIDI0MDcyOSAgTml4b24gUG93ZXIgT25nICAgIFJlbW92ZWQgRVhUREVMIHZhbGlkYXRpb24sIEFkZGVkIFNBUFIgZnJvbSBPUFJJQ0wNCiogMi4wLjIgICAgICAyNDA4MDEgIE5peG9uIFBvd2VyIE9uZyAgICBSZWZyZXNoIEVYVDQ3OSxFWFQ0ODAgd2hlbiBwcmludGluZyBETiB3aXRoIGRlbGV0ZWQgbGluZQ0KKiAyLjAuMyAgICAgIDI0MDgyMiAgTml4b24gUG93ZXIgT25nICAgIFJPUkMgIT0gMyBnZXQgTVJUV1NMIGFzIENPTkENCiogMi4wLjQgICAgICAyNDA4MjIgIE5peG9uIFBvd2VyIE9uZyAgICBBZGRlZCBFWFQ2MTksRVhUNjIwIGZvciBNV1M2MjBQRiwgbW92ZWQgZnJvbSBDUkVYUFJUIHRvIFRyYW5zYWN0aW9uDQoqLw0KDQppbXBvcnQgamF2YS51dGlsLio7DQppbXBvcnQgamF2YS51dGlsLnJlZ2V4Lio7DQppbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZTsNCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTsNCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxUaW1lOw0KaW1wb3J0IGphdmEudGltZS5mb3JtYXQuRGF0ZVRpbWVGb3JtYXR0ZXI7DQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZVBhcnNlRXhjZXB0aW9uOw0KDQpwdWJsaWMgY2xhc3MgR2VuRGVsTm90ZSBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pOw0KICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbTsNCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZTsNCiAgcHJpdmF0ZSBmaW5hbCBMb2dnZXJBUEkgbG9nZ2VyOw0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyOw0KICANCiAgcHJpdmF0ZSBmaW5hbCBpbnQgTUFYX1JFQ09SRFMgPSAxMDAwMDsNCiAgcHJpdmF0ZSBmaW5hbCBpbnQgcm93U2l6ZSA9IDE1Ow0KICANCiAgcHVibGljIEdlbkRlbE5vdGUoTUlBUEkgbWksIFByb2dyYW1BUEkgcHJvZ3JhbSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIExvZ2dlckFQSSBsb2dnZXIsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyKSB7DQogICAgdGhpcy5taSA9IG1pOw0KCSAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbTsNCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2U7DQogICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7DQogICAgdGhpcy5taUNhbGxlciA9IG1pQ2FsbGVyOw0KICB9DQogIA0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIGludCBDT05PID0gcHJvZ3JhbS5MREFaRC5nZXQoIkNPTk8iKTsNCiAgICBpbnQgSU5PVSA9IDE7DQogICAgaW50IENPTk4gPSBtaS5pbi5nZXQoIkNPTk4iKSA9PSBudWxsID8gMCA6IG1pLmluLmdldCgiQ09OTiIpIGFzIGludDsNCiAgICBsb25nIERMSVggPSBtaS5pbi5nZXQoIkRMSVgiKSA9PSBudWxsID8gMCBhcyBsb25nIDogbWkuaW4uZ2V0KCJETElYIikgYXMgbG9uZzsNCiAgICANCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNSERJU0giKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk9RQ09OTiIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgY29udGFpbmVyLnNldCgiT1FDT05PIiwgQ09OTyk7DQogICAgY29udGFpbmVyLnNldCgiT1FJTk9VIiwgSU5PVSk7DQogICAgY29udGFpbmVyLnNldCgiT1FETElYIiwgRExJWCk7DQogICAgDQogICAgaWYoQ09OTiA9PSAwKSB7DQogICAgICBpZihxdWVyeS5yZWFkKGNvbnRhaW5lcikpIHsNCiAgICAgICAgQ09OTiA9IGNvbnRhaW5lci5nZXQoIk9RQ09OTiIpOw0KICAgICAgICANCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG1pLmVycm9yKCJzaGlwbWVudCBjYW50IGJlIGZvdW5kIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICB9DQogICAgDQogICAgcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUhESVNIIikuaW5kZXgoIjIwIikuc2VsZWN0aW9uKCJPUUNPTk8iLCAiT1FJTk9VIiwgIk9RQ09OTiIsICJPUURMSVgiLCAiT1FDT05BIiwgIk9RUk9SQyIpLmJ1aWxkKCk7DQogICAgY29udGFpbmVyID0gcXVlcnkuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgY29udGFpbmVyLnNldCgiT1FDT05PIiwgQ09OTyk7DQogICAgY29udGFpbmVyLnNldCgiT1FJTk9VIiwgSU5PVSk7DQogICAgY29udGFpbmVyLnNldCgiT1FDT05OIiwgQ09OTik7DQogICAgDQogICAgaW50IGluZGV4ID0gMzsNCiAgICANCiAgICBpZihDT05OID09IDApIHsNCiAgICAgIENPTk4gPSBETElYIGFzIGludDsNCiAgICAgIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1IRElTSCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiT1FDT05PIiwgIk9RSU5PVSIsICJPUUNPTk4iLCAiT1FETElYIiwgIk9RQ09OQSIsICJPUVBHUlMiLCAiT1FDT0FGIiwgIk9RRFNEVCIpLmJ1aWxkKCk7DQogICAgICBjb250YWluZXIgPSBxdWVyeS5jcmVhdGVDb250YWluZXIoKTsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9RQ09OTyIsIENPTk8pOw0KICAgICAgY29udGFpbmVyLnNldCgiT1FJTk9VIiwgSU5PVSk7DQogICAgICBjb250YWluZXIuc2V0KCJPUURMSVgiLCBETElYKTsNCiAgICAgICAgIA0KICAgICAgaW5kZXggPSAzOw0KICAgIH0NCiAgICANCiAgICBkZWxldGVSZWNvcmRzQnlDT05OKENPTk8sIENPTk4sICJFWFQ0NzkiKTsNCiAgICBkZWxldGVSZWNvcmRzQnlDT05OKENPTk8sIENPTk4sICJFWFQ0ODAiKTsNCiAgICANCiAgICBkZWxldGVSZWNvcmRzQnlDT05OKENPTk8sIENPTk4sICJFWFQ2MTkiKTsNCiAgICBkZWxldGVSZWNvcmRzQnlDT05OKENPTk8sIENPTk4sICJFWFQ2MjAiKTsNCiAgICANCiAgICBtaS5vdXREYXRhLnB1dCgiVEVYVCIsICIke0NPTk59ICR7RExJWH0iKTsNCiAgICBtaS53cml0ZSgpOw0KICAgIA0KICAgIEFycmF5TGlzdDxNYXA8U3RyaW5nLCBTdHJpbmc+PiBsaW5lcyA9IG5ldyBBcnJheUxpc3Q8TWFwPFN0cmluZywgU3RyaW5nPj4oKTsNCiAgICBBcnJheUxpc3Q8TWFwPFN0cmluZywgU3RyaW5nPj4gZGVsaXZlcnlsaW5lcyA9IG5ldyBBcnJheUxpc3Q8TWFwPFN0cmluZywgU3RyaW5nPj4oKTsNCiAgICANCiAgICBEQkFjdGlvbiBxdWVyeU1IRElTTCA9IGRhdGFiYXNlLnRhYmxlKCJNSERJU0wiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIlVSQ09OTyIsICJVUkRMSVgiLCAiVVJJVE5PIiwgIlVSUklETiIsICJVUlJJREwiLCAiVVJQTFFUIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJNSERJU0wgPSBxdWVyeU1IRElTTC5jcmVhdGVDb250YWluZXIoKTsNCiAgICANCiAgICBEQkFjdGlvbiBxdWVyeU9PTElORSA9IGRhdGFiYXNlLnRhYmxlKCJPT0xJTkUiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk9CTkVQUiIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyT09MSU5FID0gcXVlcnlPT0xJTkUuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgDQogICAgREJBY3Rpb24gcXVlcnlPRExJTkUgPSBkYXRhYmFzZS50YWJsZSgiT0RMSU5FIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJVQk5FUFIiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck9ETElORSA9IHF1ZXJ5T0RMSU5FLmNyZWF0ZUNvbnRhaW5lcigpOw0KICAgIA0KICAgIERCQWN0aW9uIHF1ZXJ5TUlUTUFIID0gZGF0YWJhc2UudGFibGUoIk1JVE1BSCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiSE1UWTE1IiwgIkhNVFgxNSIsICJITVNUWU4iKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1JVE1BSCA9IHF1ZXJ5TUlUTUFILmNyZWF0ZUNvbnRhaW5lcigpOw0KICAgIA0KICAgIERCQWN0aW9uIHF1ZXJ5TUlUTUFTID0gZGF0YWJhc2UudGFibGUoIk1JVE1BUyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiTU1JVERTIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJNSVRNQVMgPSBxdWVyeU1JVE1BUy5jcmVhdGVDb250YWluZXIoKTsNCiAgICANCiAgICBEQkFjdGlvbiBxdWVyeU1HTElORSA9IGRhdGFiYXNlLnRhYmxlKCJNR0xJTkUiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk1SVFdTTCIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyTUdMSU5FID0gcXVlcnlNR0xJTkUuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgDQogICAgTWFwIHRvdGFscyA9IG5ldyBIYXNoTWFwKCk7IA0KICAgIE1hcCBwYWdlVG90YWxzID0gbmV3IEhhc2hNYXAoKTsgDQogICAgTWFwIHRvdGFsc1BMUVQgPSBuZXcgSGFzaE1hcCgpOyANCiAgICANCiAgICBxdWVyeS5yZWFkQWxsKGNvbnRhaW5lciwgaW5kZXgsIE1BWF9SRUNPUkRTLCB7IERCQ29udGFpbmVyIG1oZGlzaERhdGEgLT4NCiAgICAgIE1hcCByZXN1bHQgPSBuZXcgSGFzaE1hcCgpOyANCiAgICAgIA0KICAgICAgZG91YmxlIHRvdGFsID0gMDsNCiAgICAgIGRvdWJsZSB0b3RhbFBMUVQgPSAwOw0KICAgICAgaW50IFJPUkMgPSBtaGRpc2hEYXRhLmdldCgiT1FST1JDIikgYXMgaW50Ow0KICAgICAgbG9uZyBsaW5lRExJWCA9IG1oZGlzaERhdGEuZ2V0KCJPUURMSVgiKSBhcyBsb25nOw0KICAgICAgU3RyaW5nIENPTkEgPSBtaGRpc2hEYXRhLmdldCgiT1FDT05BIik7DQogICAgICANCiAgICAgIG1pLm91dERhdGEucHV0KCJURVhUIiwgIiR7Q09OTn0gJHtsaW5lRExJWH0iKTsNCiAgICAgIG1pLndyaXRlKCk7DQogICAgICANCiAgICAgIGNvbnRhaW5lck1IRElTTC5zZXQoIlVSQ09OTyIsIENPTk8pOw0KICAgICAgY29udGFpbmVyTUhESVNMLnNldCgiVVJETElYIiwgbGluZURMSVgpOw0KICAgICAgDQogICAgICBpbnQgY3RyID0gMTsNCiAgICAgIGludCBwYWdlTnVtID0gMTsNCiAgICAgIGludCBsaW5lQ3RyID0gMTsNCiAgICANCiAgICAgIHF1ZXJ5TUhESVNMLnJlYWRBbGwoY29udGFpbmVyTUhESVNMLCAyLCBNQVhfUkVDT1JEUywgeyBEQkNvbnRhaW5lciBtaGRpc2xEYXRhIC0+DQogICAgICAgIE1hcCByZXN1bHRMaW5lID0gbmV3IEhhc2hNYXAoKTsgDQogICAgICAgIA0KICAgICAgICBkb3VibGUgUExRVCA9IG1oZGlzbERhdGEuZ2V0KCJVUlBMUVQiKSBhcyBkb3VibGU7DQogICAgICAgIA0KICAgICAgICBpZihQTFFUID4gMCkgew0KICAgICAgICAgIGlmKGN0ciA+IHJvd1NpemUpIHsNCiAgICAgICAgICAgIGN0ciA9IDE7DQogICAgICAgICAgICBwYWdlTnVtKys7DQogICAgICAgICAgfQ0KICAgICAgICAgIA0KICAgICAgICAgIFN0cmluZyBPUk5PID0gbWhkaXNsRGF0YS5nZXQoIlVSUklETiIpOw0KICAgICAgICAgIGludCBSSURMID0gbWhkaXNsRGF0YS5nZXQoIlVSUklETCIpIGFzIGludDsNCiAgICAgICAgICBTdHJpbmcgSVROTyA9IG1oZGlzbERhdGEuZ2V0U3RyaW5nKCJVUklUTk8iKS50cmltKCk7DQogICAgICAgICAgDQogICAgICAgICAgU3RyaW5nIGJsb2NrTm8gPSBnZXRCbG9jayhDT05PLCBJVE5PKTsNCiAgICAgICAgICBTdHJpbmcgVFkxNSA9ICIiOw0KICAgICAgICAgIFN0cmluZyBUWDE1ID0gIiI7DQogICAgICAgICAgU3RyaW5nIFNUWU4gPSAiIjsNCiAgICAgICAgICBTdHJpbmcgSVREUyA9ICIiOw0KICAgICAgICAgIA0KICAgICAgICAgIGNvbnRhaW5lck1JVE1BSC5zZXQoIkhNQ09OTyIsIENPTk8pOw0KICAgICAgICAgIGNvbnRhaW5lck1JVE1BSC5zZXQoIkhNSVROTyIsIElUTk8pOw0KICAgICAgICAgIA0KICAgICAgICAgIGlmIChxdWVyeU1JVE1BSC5yZWFkKGNvbnRhaW5lck1JVE1BSCkpIHsNCiAgICAgICAgICAgIFRZMTUgPSBjb250YWluZXJNSVRNQUguZ2V0KCJITVRZMTUiKTsNCiAgICAgICAgICAgIFRYMTUgPSBjb250YWluZXJNSVRNQUguZ2V0KCJITVRYMTUiKTsNCiAgICAgICAgICAgIFNUWU4gPSBjb250YWluZXJNSVRNQUguZ2V0KCJITVNUWU4iKTsNCiAgICAgICAgICB9DQogICAgICAgICAgDQogICAgICAgICAgY29udGFpbmVyTUlUTUFTLnNldCgiTU1DT05PIiwgQ09OTyk7DQogICAgICAgICAgY29udGFpbmVyTUlUTUFTLnNldCgiTU1JVE5PIiwgSVROTyk7DQogICAgICAgICAgDQogICAgICAgICAgaWYgKHF1ZXJ5TUlUTUFTLnJlYWQoY29udGFpbmVyTUlUTUFTKSkgew0KICAgICAgICAgICAgSVREUyA9IGNvbnRhaW5lck1JVE1BUy5nZXQoIk1NSVREUyIpOw0KICAgICAgICAgIH0NCiAgICAgICAgICANCiAgICAgICAgICBpZihST1JDICE9IDMpIHsNCiAgICAgICAgICAgIGNvbnRhaW5lck1HTElORS5zZXQoIk1SQ09OTyIsIENPTk8pOw0KICAgICAgICAgICAgY29udGFpbmVyTUdMSU5FLnNldCgiTVJUUk5SIiwgT1JOTyk7DQogICAgICAgICAgICBjb250YWluZXJNR0xJTkUuc2V0KCJNUlBPTlIiLCBSSURMKTsNCiAgICAgICAgICAgIGNvbnRhaW5lck1HTElORS5zZXQoIk1SUE9TWCIsIDApOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZihxdWVyeU1HTElORS5yZWFkKGNvbnRhaW5lck1HTElORSkpIHsNCiAgICAgICAgICAgICAgQ09OQSA9IGNvbnRhaW5lck1HTElORS5nZXQoIk1SVFdTTCIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICANCiAgICAgICAgICByZXN1bHRMaW5lLnB1dCgiRExJWCIsIGxpbmVETElYIGFzIFN0cmluZyk7DQogICAgICAgICAgcmVzdWx0TGluZS5wdXQoIkNPTkEiLCBDT05BLnRyaW0oKSk7DQogICAgICAgICAgcmVzdWx0TGluZS5wdXQoIk9STk8iLCBPUk5PKTsNCiAgICAgICAgICByZXN1bHRMaW5lLnB1dCgiUE9OUiIsIFJJREwgYXMgU3RyaW5nKTsNCiAgICAgICAgICByZXN1bHRMaW5lLnB1dCgiSVROTyIsIElUTk8pOw0KICAgICAgICAgIHJlc3VsdExpbmUucHV0KCJJVERTIiwgSVREUyk7DQogICAgICAgICAgcmVzdWx0TGluZS5wdXQoIlNUWU4iLCBTVFlOKTsNCiAgICAgICAgICByZXN1bHRMaW5lLnB1dCgiVFkxNSIsIFRZMTUpOw0KICAgICAgICAgIHJlc3VsdExpbmUucHV0KCJUWDE1IiwgVFgxNSk7DQogICAgICAgICAgcmVzdWx0TGluZS5wdXQoIlNFUU4iLCBsaW5lQ3RyKTsNCiAgICAgICAgICByZXN1bHRMaW5lLnB1dCgiUEFHRSIsIHBhZ2VOdW0pOw0KICAgICAgICAgIA0KICAgICAgICAgIGlmKFJPUkMgPT0gMykgew0KICAgICAgICAgICAgY29udGFpbmVyT09MSU5FLnNldCgiT0JDT05PIiwgQ09OTyk7DQogICAgICAgICAgICBjb250YWluZXJPT0xJTkUuc2V0KCJPQk9STk8iLCBPUk5PKTsNCiAgICAgICAgICAgIGNvbnRhaW5lck9PTElORS5zZXQoIk9CUE9OUiIsIFJJREwpOw0KICAgICAgICAgICAgY29udGFpbmVyT09MSU5FLnNldCgiT0JQT1NYIiwgMCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmKHF1ZXJ5T09MSU5FLnJlYWQoY29udGFpbmVyT09MSU5FKSkgew0KICAgICAgICAgICAgICBkb3VibGUgTkVQUiA9IGNvbnRhaW5lck9PTElORS5nZXQoIk9CTkVQUiIpOyANCiAgICAgICAgICAgICAgDQogICAgICAgICAgICAgIHRvdGFsICs9IE5FUFIgKiBQTFFUOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjb250YWluZXJPRExJTkUuc2V0KCJVQkNPTk8iLCBDT05PKTsNCiAgICAgICAgICAgIGNvbnRhaW5lck9ETElORS5zZXQoIlVCT1JOTyIsIE9STk8pOw0KICAgICAgICAgICAgY29udGFpbmVyT0RMSU5FLnNldCgiVUJQT05SIiwgUklETCk7DQogICAgICAgICAgICBjb250YWluZXJPRExJTkUuc2V0KCJVQlBPU1giLCAwKTsNCiAgICAgICAgICAgIGNvbnRhaW5lck9ETElORS5zZXQoIlVCRExJWCIsIGxpbmVETElYKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcXVlcnlPRExJTkUucmVhZEFsbChjb250YWluZXJPRExJTkUsIDUsIDEsIHsgREJDb250YWluZXIgb2RsaW5lRGF0YSAtPg0KICAgICAgICAgICAgICBkb3VibGUgTkVQUiA9IG9kbGluZURhdGEuZ2V0KCJVQk5FUFIiKTsgDQogICAgICAgICAgICAgIA0KICAgICAgICAgICAgICB0b3RhbCArPSBORVBSICogUExRVDsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgICANCiAgICAgICAgICB0b3RhbFBMUVQgKz0gUExRVDsNCiAgICAgICAgICANCiAgICAgICAgICBsaW5lcy5hZGQocmVzdWx0TGluZSk7DQogICAgICAgICAgDQogICAgICAgICAgbGluZUN0cisrOw0KICAgICAgICAgIGN0cisrOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIA0KICAgICAgcGFnZVRvdGFscy5wdXQobGluZURMSVggYXMgU3RyaW5nLCBwYWdlTnVtKTsNCiAgICAgIHRvdGFscy5wdXQobGluZURMSVggYXMgU3RyaW5nLCB0b3RhbCk7DQogICAgICANCiAgICAgIHRvdGFsc1BMUVQucHV0KGxpbmVETElYIGFzIFN0cmluZywgdG90YWxQTFFUKTsNCiAgICB9KTsNCiAgIA0KICAgIGluc2VydERhdGFUb1RhYmxlKENPTk8sIENPTk4sIGxpbmVzLCAiTU1TNDgwUEYiLCB0b3RhbHMsIHBhZ2VUb3RhbHMsIHRvdGFsc1BMUVQsICJFWFQ0NzkiLCAiRVhUNDgwIik7DQogICAgY29tcHV0ZVRvdGFsUGFnZShDT05PLCBDT05OLCAiRVhUNDc5Iik7DQogICAgDQogICAgaW5zZXJ0RGF0YVRvVGFibGUoQ09OTywgQ09OTiwgbGluZXMsICJNV1M2MjBQRiIsIHRvdGFscywgcGFnZVRvdGFscywgdG90YWxzUExRVCwgIkVYVDYxOSIsICJFWFQ2MjAiKTsNCiAgICBjb21wdXRlVG90YWxQYWdlKENPTk8sIENPTk4sICJFWFQ2MTkiKTsNCiAgfQ0KICANCiAgLyoqDQogICAqIEdldCB0b3RhbCBudW1iZXIgb2YgcGFnZXMgZm9yIEVYVDQ3OQ0KICAgKiBAcGFyYW1zIENPTk8gLSBJbnB1dCBDT05PDQogICAqIEBwYXJhbXMgQ09OTiAtIElucHV0IHNoaXBtZW50IG51bWJlcg0KICAgKiBAcmV0dXJuIG5vdGhpbmcNCiAgKi8NCiAgdm9pZCBjb21wdXRlVG90YWxQYWdlKGludCBDT05PLCBpbnQgQ09OTiwgU3RyaW5nIGhlYWRUYWJsZSkgew0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoaGVhZFRhYmxlKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkVYRExJWCIsICJFWENPTkEiLCAiRVhUWVBFIiwgIkVYUEFHRSIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgY29udGFpbmVyLnNldCgiRVhDT05PIiwgQ09OTyk7DQogICAgY29udGFpbmVyLnNldCgiRVhDT05OIiwgQ09OTik7DQogICAgDQogICAgQXJyYXlMaXN0PE1hcDxTdHJpbmcsIFN0cmluZz4+IGxpbmVzID0gbmV3IEFycmF5TGlzdDxNYXA8U3RyaW5nLCBTdHJpbmc+PigpOw0KICAgIA0KICAgIEFycmF5TGlzdDxNYXA8U3RyaW5nLCBTdHJpbmc+PiBkZWxpdmVyeWxpbmVzID0gbmV3IEFycmF5TGlzdDxNYXA8U3RyaW5nLCBTdHJpbmc+PigpOw0KICAgDQogICAgbG9uZyBjdXJyRExJWCA9IC0xOw0KICAgIGludCBjdHIgPSAwOw0KICAgIGludCBjdXJyVHlwZSA9IC0xOw0KICAgIFN0cmluZyBjdXJyQ09OQSA9IG51bGw7DQogICANCiAgICBxdWVyeS5yZWFkQWxsKGNvbnRhaW5lciwgMiwgTUFYX1JFQ09SRFMsIHsgREJDb250YWluZXIgZGF0YSAtPg0KICAgICAgTWFwIHJlc3VsdCA9IG5ldyBIYXNoTWFwKCk7IA0KICAgICAgDQogICAgICBsb25nIERMSVggPSBkYXRhLmdldCgiRVhETElYIik7DQogICAgICBpbnQgVFlQRSA9IGRhdGEuZ2V0KCJFWFRZUEUiKTsNCiAgICAgIFN0cmluZyBDT05BID0gZGF0YS5nZXQoIkVYQ09OQSIpOw0KICAgICAgDQogICAgICBpZihjdXJyRExJWCA9PSAtMSAmJiBjdXJyVHlwZSA9PSAtMSkgew0KICAgICAgICBjdXJyRExJWCA9IERMSVg7DQogICAgICAgIGN1cnJUeXBlID0gVFlQRTsNCiAgICAgICAgY3VyckNPTkEgPSBDT05BOw0KICAgICAgfQ0KICAgICAgDQogICAgICBpZihjdXJyRExJWCAhPSBETElYIHx8IChjdXJyRExJWCA9PSBETElYICYmIGN1cnJUeXBlICE9IFRZUEUpKSB7DQogICAgICAgIHVwZGF0ZU1heFBhZ2VIZWFkVGFibGUoQ09OTywgQ09OTiwgY3VyckRMSVgsIGN1cnJDT05BLCBjdXJyVHlwZSwgY3RyLCBoZWFkVGFibGUpOw0KICAgICAgICBjdHIgPSAwOw0KICAgICAgICBkZWxpdmVyeWxpbmVzLmNsZWFyKCk7DQogICAgICAgIGN1cnJETElYID0gRExJWDsNCiAgICAgICAgY3VyclR5cGUgPSBUWVBFOw0KICAgICAgICBjdXJyQ09OQSA9IENPTkE7DQogICAgICB9IA0KICAgICAgDQogICAgICByZXN1bHQucHV0KCJETElYIiwgZGF0YS5nZXQoIkVYRExJWCIpIGFzIFN0cmluZyk7DQogICAgICByZXN1bHQucHV0KCJDT05BIiwgZGF0YS5nZXQoIkVYQ09OQSIpKTsNCiAgICAgIHJlc3VsdC5wdXQoIlRZUEUiLCBkYXRhLmdldCgiRVhUWVBFIikgYXMgU3RyaW5nKTsNCiAgICAgIHJlc3VsdC5wdXQoIlBBR0UiLCBkYXRhLmdldCgiRVhQQUdFIikgYXMgU3RyaW5nKTsNCiAgICAgIA0KICAgICAgZGVsaXZlcnlsaW5lcy5hZGQocmVzdWx0KTsNCiAgICAgIA0KICAgICAgY3RyKys7DQogICAgfSk7DQogICAgDQogICAgdXBkYXRlTWF4UGFnZUhlYWRUYWJsZShDT05PLCBDT05OLCBjdXJyRExJWCwgY3VyckNPTkEsIGN1cnJUeXBlLCBjdHIsIGhlYWRUYWJsZSk7DQogIH0NCiAgDQogIC8qKg0KICAgKiBVcGRhdGUgTVhQRywgRFBHTiBpbiBFWFQ0NzkgVGFibGUNCiAgICogQHBhcmFtcyBDT05PIC0gSW5wdXQgQ09OTw0KICAgKiBAcGFyYW1zIENPTk4gLSBJbnB1dCBzaGlwbWVudCBudW1iZXINCiAgICogQHBhcmFtcyBETElYIC0gSW5wdXQgZGVsaXZlcnkgbnVtYmVyDQogICAqIEBwYXJhbXMgdmFsIC0gSW5wdXQgdG90YWwgcGFnZXMNCiAgICogQHJldHVybiBub3RoaW5nDQogICovDQogIHZvaWQgdXBkYXRlTWF4UGFnZUhlYWRUYWJsZShpbnQgQ09OTywgaW50IENPTk4sIGxvbmcgRExJWCwgU3RyaW5nIENPTkEsIGludCBUWVBFLCBpbnQgdmFsLCBTdHJpbmcgaGVhZFRhYmxlKSB7DQogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZShoZWFkVGFibGUpLmluZGV4KCIwMCIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgY29udGFpbmVyLnNldCgiRVhDT05PIiwgQ09OTyk7DQogICAgY29udGFpbmVyLnNldCgiRVhDT05OIiwgQ09OTik7DQogICAgY29udGFpbmVyLnNldCgiRVhETElYIiwgRExJWCk7DQogICAgY29udGFpbmVyLnNldCgiRVhDT05BIiwgQ09OQSk7DQogICAgY29udGFpbmVyLnNldCgiRVhUWVBFIiwgVFlQRSk7DQogICAgDQogICAgaW50IGN0ciA9IDE7DQogICAgDQogICAgQ2xvc3VyZTw/PiB1cGRhdGVDYWxsQmFjayA9IHsgTG9ja2VkUmVzdWx0IGxvY2tlZFJlc3VsdCAtPg0KICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhNWFBHIiwgdmFsKTsNCiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYRFBHTiIsIGN0cik7DQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWENITk8iLCAoaW50KWxvY2tlZFJlc3VsdC5nZXQoIkVYQ0hOTyIpICsgMSk7DQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWExNRFQiLCBMb2NhbERhdGUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpOw0KICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDSElEIiwgcHJvZ3JhbS5nZXRVc2VyKCkpOw0KICAgICAgDQogICAgICBsb2NrZWRSZXN1bHQudXBkYXRlKCk7DQogICAgICBjdHIrKzsNCiAgICB9Ow0KICAgIA0KICAgIHF1ZXJ5LnJlYWRBbGxMb2NrKGNvbnRhaW5lciwgNSwgdXBkYXRlQ2FsbEJhY2spOw0KICB9DQogIA0KICAvKioNCiAgICogQ2hlY2sgQ09OQS1Db25zaWduZWUgaWYgc3RhcnRzIHdpdGggMjMwMSBvciAyMzAyDQogICAqIEBwYXJhbXMgQ09OQSAtIElucHV0IGNvbnNpZ25lZQ0KICAgKiBAcGFyYW1zIENPTk4gLSBJbnB1dCBzaGlwbWVudCBudW1iZXINCiAgICogQHJldHVybiBib29sZWFuDQogICovDQogIGJvb2xlYW4gY2hlY2tDT05BKFN0cmluZyBDT05BKSB7DQogICAgaWYoQ09OQS5sZW5ndGgoKSA+PSA0KSB7DQogICAgICBjaGFyW10gY2ggPSBDT05BLnRvQ2hhckFycmF5KCk7DQogICAgICBpZihjaFswXSA9PSAnMicgJiYgY2hbMV0gPT0gJzMnICYmIGNoWzJdID09ICcwJyAmJiBjaFszXSA9PSAnMicpIHsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQogIH0NCiAgDQogIC8qKg0KICAgKiBJbnNlcnQgZGF0YSB0byB0aGUgRVhUNDgwIHRhYmxlDQogICAqIEBwYXJhbXMgQ09OTyAtIElucHV0IGNvbXBhbnkNCiAgICogQHBhcmFtcyBDT05OIC0gSW5wdXQgc2hpcG1lbnQgbnVtYmVyDQogICAqIEBwYXJhbXMgbGluZXMgLSBjb250YWluaW5nIHRoZSBsaW5lcyB0byBiZSBpbnNlcnRlZA0KICAgKiBAcmV0dXJuIG5vdGhpbmcNCiAgKi8NCiAgdm9pZCBpbnNlcnREYXRhVG9UYWJsZShpbnQgQ09OTywgaW50IENPTk4sIEFycmF5TGlzdDxNYXA8U3RyaW5nLCBTdHJpbmc+PiBsaW5lcywgU3RyaW5nIFBGLCBNYXAgdG90YWxzLCBNYXAgcGFnZVRvdGFscywgTWFwIHRvdGFsc1BMUVQsIFN0cmluZyBoZWFkVGFibGUsIFN0cmluZyBsaW5lVGFibGUpIHsNCiAgICBEQkFjdGlvbiBsaW5lUXVlcnkgPSBkYXRhYmFzZS50YWJsZShsaW5lVGFibGUpLmluZGV4KCIwMCIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgbGluZUNvbnRhaW5lciA9IGxpbmVRdWVyeS5nZXRDb250YWluZXIoKTsNCiAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhDT05PIiwgQ09OTyk7DQogICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQ09OTiIsIENPTk4pOw0KICAgIA0KICAgIERCQWN0aW9uIGhlYWRRdWVyeSA9IGRhdGFiYXNlLnRhYmxlKGhlYWRUYWJsZSkuaW5kZXgoIjAwIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBoZWFkQ29udGFpbmVyID0gaGVhZFF1ZXJ5LmdldENvbnRhaW5lcigpOw0KICAgIGhlYWRDb250YWluZXIuc2V0KCJFWENPTk8iLCBDT05PKTsNCiAgICBoZWFkQ29udGFpbmVyLnNldCgiRVhDT05OIiwgQ09OTik7DQogICAgDQogICAgZm9yIChpbnQgaT0wOyBpPGxpbmVzLnNpemUoKTsgaSsrKSB7DQogICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlY29yZCA9IChNYXA8U3RyaW5nLCBTdHJpbmc+KSBsaW5lc1tpXTsNCiAgICAgIA0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYRExJWCIsIHJlY29yZC5ETElYIGFzIGxvbmcpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQ09OQSIsIHJlY29yZC5DT05BKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWFBBR0UiLCByZWNvcmQuUEFHRSBhcyBpbnQpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYT1JOTyIsIHJlY29yZC5PUk5PKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWFBPTlIiLCByZWNvcmQuUE9OUiBhcyBpbnQpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYSVROTyIsIHJlY29yZC5JVE5PIGFzIFN0cmluZyk7DQogICAgICANCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWElURFMiLCByZWNvcmQuSVREUyk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhTVFlOIiwgcmVjb3JkLlNUWU4pOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYVFkxNSIsIHJlY29yZC5UWTE1KTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWFRYMTUiLCByZWNvcmQuVFgxNSk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhTRVFOIiwgcmVjb3JkLlNFUU4gYXMgaW50KTsNCiAgICAgIA0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYUkdEVCIsIExvY2FsRGF0ZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKSk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhSR1RNIiwgTG9jYWxUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKSk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhMTURUIiwgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWENITk8iLCAwKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWENISUQiLCBwcm9ncmFtLmdldFVzZXIoKSk7DQogICAgICANCiAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWERMSVgiLCByZWNvcmQuRExJWCBhcyBsb25nKTsNCiAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWENPTkEiLCByZWNvcmQuQ09OQSk7DQogICAgICBoZWFkQ29udGFpbmVyLnNldCgiRVhQQUdFIiwgcmVjb3JkLlBBR0UgYXMgaW50KTsNCiAgICAgIA0KICAgICAgaWYocmVjb3JkLlBBR0UgYXMgaW50ID09IHBhZ2VUb3RhbHMuZ2V0KHJlY29yZC5ETElYIGFzIFN0cmluZykgYXMgaW50KSB7DQogICAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWEFNTlQiLCB0b3RhbHMuZ2V0KHJlY29yZC5ETElYIGFzIFN0cmluZykgYXMgZG91YmxlKTsNCiAgICAgICAgaGVhZENvbnRhaW5lci5zZXQoIkVYUExRVCIsIHRvdGFsc1BMUVQuZ2V0KHJlY29yZC5ETElYIGFzIFN0cmluZykgYXMgZG91YmxlKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWEFNTlQiLCAwKTsNCiAgICAgICAgaGVhZENvbnRhaW5lci5zZXQoIkVYUExRVCIsIHRvdGFsc1BMUVQuZ2V0KHJlY29yZC5ETElYIGFzIFN0cmluZykgYXMgZG91YmxlKTsNCiAgICAgIH0NCiAgICAgIA0KICAgICAgaGVhZENvbnRhaW5lci5zZXQoIkVYUkdEVCIsIExvY2FsRGF0ZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKSk7DQogICAgICBoZWFkQ29udGFpbmVyLnNldCgiRVhSR1RNIiwgTG9jYWxUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKSk7DQogICAgICBoZWFkQ29udGFpbmVyLnNldCgiRVhMTURUIiwgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKTsNCiAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWENITk8iLCAwKTsNCiAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWENISUQiLCBwcm9ncmFtLmdldFVzZXIoKSk7DQogICAgICANCiAgICAgIGlmKFBGLmVxdWFscygiTU1TNDgwUEYiKSAmJiBjaGVja0NPTkEocmVjb3JkLkNPTkEpKSB7DQogICAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWFRZUEUiLCAxKTsNCiAgICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQU1OVCIsIDk5Ljk5KTsNCiAgICAgICAgaGVhZENvbnRhaW5lci5zZXQoIkVYVFlQRSIsIDEpOw0KICAgICAgICANCiAgICAgICAgbGluZVF1ZXJ5Lmluc2VydChsaW5lQ29udGFpbmVyKTsNCiAgICAgICAgaGVhZFF1ZXJ5Lmluc2VydChoZWFkQ29udGFpbmVyKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWFRZUEUiLCAxKTsNCiAgICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQU1OVCIsIDk5Ljk5KTsNCiAgICAgICAgaGVhZENvbnRhaW5lci5zZXQoIkVYVFlQRSIsIDEpOw0KICAgICAgICANCiAgICAgICAgbGluZVF1ZXJ5Lmluc2VydChsaW5lQ29udGFpbmVyKTsNCiAgICAgICAgaGVhZFF1ZXJ5Lmluc2VydChoZWFkQ29udGFpbmVyKTsNCiAgICAgICAgDQogICAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWFRZUEUiLCAyKTsNCiAgICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQU1OVCIsIDApOw0KICAgICAgICBoZWFkQ29udGFpbmVyLnNldCgiRVhUWVBFIiwgMik7DQogICAgICAgIA0KICAgICAgICBsaW5lUXVlcnkuaW5zZXJ0KGxpbmVDb250YWluZXIpOw0KICAgICAgICBoZWFkUXVlcnkuaW5zZXJ0KGhlYWRDb250YWluZXIpOw0KICAgICAgfQ0KICAgICANCiAgICB9DQogIH0NCiAgDQogIC8qKg0KICAgKiBHZXQgTU1DRkk0IC0gQmxvY2sgbnVtYmVyIGZyb20gTUlUTUFTDQogICAqIEBwYXJhbXMgQ09OTyAtIElucHV0IGNvbXBhbnkNCiAgICogQHBhcmFtcyBJVE5PIC0gSW5wdXQgaXRlbSBudW1iZXINCiAgICogQHJldHVybiBibG9jaw0KICAqLw0KICBTdHJpbmcgZ2V0QmxvY2soaW50IENPTk8sIFN0cmluZyBJVE5PKSB7DQogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUlUTUFTIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJNTUNGSTQiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmNyZWF0ZUNvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lci5zZXQoIk1NQ09OTyIsIENPTk8pOw0KICAgIGNvbnRhaW5lci5zZXQoIk1NSVROTyIsIElUTk8pOw0KICAgIA0KICAgIFN0cmluZyBibG9jayA9ICIiOw0KICAgIA0KICAgIGlmIChxdWVyeS5yZWFkKGNvbnRhaW5lcikpIHsNCiAgICAgIGJsb2NrID0gY29udGFpbmVyLmdldCgiTU1DRkk0Iik7DQogICAgfQ0KICAgIA0KICAgIHJldHVybiBibG9jazsNCiAgfQ0KICANCiAgLyoqDQogICAqIERlbGV0ZSBhbGwgcmVjb3JkcyBkZXBlbmRpbmcgb24gQ09OTg0KICAgKiBAcGFyYW1zIENPTk8gLSBJbnB1dCBjb21wYW55DQogICAqIEBwYXJhbXMgQ09OTiAtIElucHV0IHNoaXBtZW50IG51bWJlcg0KICAgKiBAcGFyYW1zIHRhYmxlIC0gSW5wdXQgWHRlbmQgVGFibGUNCiAgICogQHJldHVybiBub3RoaW5nDQogICovDQogIHZvaWQgZGVsZXRlUmVjb3Jkc0J5Q09OTihpbnQgQ09OTywgaW50IENPTk4sIFN0cmluZyB0YWJsZSkgew0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUodGFibGUpLmluZGV4KCIwMCIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgY29udGFpbmVyLnNldCgiRVhDT05PIiwgQ09OTyk7DQogICAgY29udGFpbmVyLnNldCgiRVhDT05OIiwgQ09OTik7DQogICAgDQogICAgQ2xvc3VyZTw/PiBkZWxldGVSZWNvcmRzID0ge0xvY2tlZFJlc3VsdCByZXN1bHQgLT4NCiAgICAgIHJlc3VsdC5kZWxldGUoKTsNCiAgICB9DQogICAgDQogICAgcXVlcnkucmVhZEFsbExvY2soY29udGFpbmVyLCAyLCBkZWxldGVSZWNvcmRzKTsNCiAgfQ0KICANCiAgLyoqDQogICAqIERlbGV0ZSBhbGwgcmVjb3JkcyBkZXBlbmRpbmcgb24gRExJWA0KICAgKiBAcGFyYW1zIENPTk8gLSBJbnB1dCBjb21wYW55DQogICAqIEBwYXJhbXMgRExJWCAtIElucHV0IGRlbGl2ZXJ5IG51bWJlcg0KICAgKiBAcGFyYW1zIHRhYmxlIC0gSW5wdXQgWHRlbmQgVGFibGUNCiAgICogQHJldHVybiBub3RoaW5nDQogICovDQogIHZvaWQgZGVsZXRlUmVjb3Jkc0J5RExJWChpbnQgQ09OTywgbG9uZyBETElYLCBTdHJpbmcgdGFibGUpIHsNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKHRhYmxlKS5pbmRleCgiMDAiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmNyZWF0ZUNvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTyIsIENPTk8pOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYRExJWCIsIERMSVggYXMgbG9uZyk7DQogICAgDQogICAgQ2xvc3VyZTw/PiBkZWxldGVSZWNvcmRzID0ge0xvY2tlZFJlc3VsdCByZXN1bHQgLT4NCiAgICAgIHJlc3VsdC5kZWxldGUoKTsNCiAgICB9DQogICAgDQogICAgcXVlcnkucmVhZEFsbExvY2soY29udGFpbmVyLCAyLCBkZWxldGVSZWNvcmRzKTsNCiAgfQ0KICANCiAgLyoqDQogICAqIERlbGV0ZSBhbGwgcmVjb3JkcyBkZXBlbmRpbmcgb24gRExJWA0KICAgKiBAcGFyYW1zIENPTk8gLSBJbnB1dCBjb21wYW55DQogICAqIEBwYXJhbXMgQ09OTiAtIElucHV0IHNoaXBtZW50IG51bWJlcg0KICAgKiBAcGFyYW1zIERMSVggLSBJbnB1dCBkZWxpdmVyeSBudW1iZXINCiAgICogQHBhcmFtcyB0YWJsZSAtIElucHV0IFh0ZW5kIFRhYmxlDQogICAqIEByZXR1cm4gbm90aGluZw0KICAqLw0KICB2b2lkIGRlbGV0ZVJlY29yZHNCeUNPTk5hbmRETElYKGludCBDT05PLCBpbnQgQ09OTiwgbG9uZyBETElYLCBTdHJpbmcgdGFibGUpIHsNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKHRhYmxlKS5pbmRleCgiMDAiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmNyZWF0ZUNvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTyIsIENPTk8pOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTiIsIENPTk4pOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYRExJWCIsIERMSVggYXMgbG9uZyk7DQogICAgDQogICAgQ2xvc3VyZTw/PiBkZWxldGVSZWNvcmRzID0ge0xvY2tlZFJlc3VsdCByZXN1bHQgLT4NCiAgICAgIHJlc3VsdC5kZWxldGUoKTsNCiAgICB9DQogICAgDQogICAgcXVlcnkucmVhZEFsbExvY2soY29udGFpbmVyLCAzLCBkZWxldGVSZWNvcmRzKTsNCiAgfQ0KICANCn0NCg0KDQoNCg=="}}}