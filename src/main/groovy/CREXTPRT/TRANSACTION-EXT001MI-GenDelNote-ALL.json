{"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"GenDelNote":{"sourceUuid":"5eaa3593-f2db-4c8d-a3e9-0439186d4c02","name":"GenDelNote","program":"EXT001MI","description":"GenPickingList","active":true,"multi":true,"modified":1723825429132,"modifiedBy":"INFNIXONG","outputFields":[{"name":"TEXT","description":"text","length":600,"mandatory":false,"type":"A"}],"inputFields":[{"name":"CONO","description":"company","length":3,"mandatory":false,"type":"N"},{"name":"DLIX","description":"delivery number","length":11,"mandatory":false,"type":"N"},{"name":"CONN","description":"shipment","length":7,"mandatory":false,"type":"N"}],"utilities":[],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"5eaa3593-f2db-4c8d-a3e9-0439186d4c02":{"uuid":"5eaa3593-f2db-4c8d-a3e9-0439186d4c02","updated":1725933828239,"updatedBy":"INFDANONG","created":1723624780308,"createdBy":"INFNIXONG","apiVersion":"0.21","beVersion":"16.0.0.20240621022400.6","language":"GROOVY","codeHash":"D419676134D467E8356A7DEFB7ED9A60BCC4D1BED9DE968602120F61D6DB8722","code":"LyoqDQoqICBATmFtZTogRVhUMDAxTUkuR2VuRGVsTm90ZQ0KKiAgQERlc2NyaXB0aW9uOiBFeHRlbmRPdXRwdXQgZm9yIE1NUzQ4MFBGL01XUzYyMFBGDQoqICBAQXV0aG9yczogTml4b24gUG93ZXIgT25nDQoqLw0KDQovKioNCiogQ0hBTkdFTE9HUw0KKiBWZXJzaW9uICAgIERhdGUgICAgVXNlciAgICAgICAgICAgICAgIERlc2NyaXB0aW9uDQoqIDEuMC4wICAgICAgMjQwMzE1ICBOaXhvbiBQb3dlciBPbmcgICAgSW5pdGlhbCBSZWxlYXNlDQoqIDEuMC4xICAgICAgMjQwNTA4ICBOaXhvbiBQb3dlciBPbmcgICAgQWZ0ZXIgWHRlbmRNMyByZXZpZXcNCiogMS4xLjAgICAgICAyNDA1MjMgIE5peG9uIFBvd2VyIE9uZyAgICBBZGRpdGlvbmFsIGxvZ2ljDQoqIDEuMS4xICAgICAgMjQwNTI4ICBOaXhvbiBQb3dlciBPbmcgICAgQ2hhbmdlZCBzbmFrZSBjYXNlIHZhcmlhYmxlIHRvIGxvd2VyIGNhbWVsIGNhc2UNCiogMS4xLjIgICAgICAyNDA2MDYgIE5peG9uIFBvd2VyIE9uZyAgICBBZGRlZCBsb2dpYyBmb3IgTTAxIE1NUzQ4MFBGDQoqIDEuMS4zICAgICAgMjQwNjA3ICBOaXhvbiBQb3dlciBPbmcgICAgQ2FzdCBJVE5PIHRvIFN0cmluZw0KKiAxLjEuNCAgICAgIDI0MDYyMCAgTml4b24gUG93ZXIgT25nICAgIENvdW50IHBhZ2UgcGVyIHR5cGUgMSwyLDM7IEFkZGVkIFBMUVQgTU1TNDgwUEYNCiogMS4xLjUgICAgICAyNDA3MDUgIE5peG9uIFBvd2VyIE9uZyAgICBBZGRlZCBuZXcgZmllbGRzIGZvciBNTVM0ODBQRiBFWFQ0ODAgdGFibGUNCiogMS4xLjYgICAgICAyNDA3MTEgIE5peG9uIFBvd2VyIE9uZyAgICBBZGRlZCBTRVFOIGZvciBFWFQ0ODANCiogMS4xLjcgICAgICAyNDA3MjIgIE5peG9uIFBvd2VyIE9uZyAgICBBZGRlZCBsb2dpYyBmb3IgQVJTMTk5UEZ2MQ0KKiAyLjAuMCAgICAgIDI0MDcyOSAgTml4b24gUG93ZXIgT25nICAgIEFkZGVkIENPQUYgZm9yIEVYVDQzNCw0MzUsNDM2IFBpY2tpbmcgTGlzdA0KKiAyLjAuMSAgICAgIDI0MDcyOSAgTml4b24gUG93ZXIgT25nICAgIFJlbW92ZWQgRVhUREVMIHZhbGlkYXRpb24sIEFkZGVkIFNBUFIgZnJvbSBPUFJJQ0wNCiogMi4wLjIgICAgICAyNDA4MDEgIE5peG9uIFBvd2VyIE9uZyAgICBSZWZyZXNoIEVYVDQ3OSxFWFQ0ODAgd2hlbiBwcmludGluZyBETiB3aXRoIGRlbGV0ZWQgbGluZQ0KKiAyLjAuMyAgICAgIDI0MDgyMiAgTml4b24gUG93ZXIgT25nICAgIFJPUkMgIT0gMyBnZXQgTVJUV1NMIGFzIENPTkENCiogMi4wLjQgICAgICAyNDA4MjIgIE5peG9uIFBvd2VyIE9uZyAgICBBZGRlZCBFWFQ2MTksRVhUNjIwIGZvciBNV1M2MjBQRiwgbW92ZWQgZnJvbSBDUkVYUFJUIHRvIFRyYW5zYWN0aW9uDQoqIDIuMC41ICAgICAgMjQwOTA5ICBEYW5pZWwgRWRyaWMgT25nICAgQ2hhbmdlZCBDT05OIGRhdGEgdHlwZSBmcm9tIGludCB0byBsb25nDQoqLw0KDQppbXBvcnQgamF2YS51dGlsLio7DQppbXBvcnQgamF2YS51dGlsLnJlZ2V4Lio7DQppbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZTsNCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTsNCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxUaW1lOw0KaW1wb3J0IGphdmEudGltZS5mb3JtYXQuRGF0ZVRpbWVGb3JtYXR0ZXI7DQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZVBhcnNlRXhjZXB0aW9uOw0KDQpwdWJsaWMgY2xhc3MgR2VuRGVsTm90ZSBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pOw0KICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbTsNCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZTsNCiAgcHJpdmF0ZSBmaW5hbCBMb2dnZXJBUEkgbG9nZ2VyOw0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyOw0KICANCiAgcHJpdmF0ZSBmaW5hbCBpbnQgTUFYX1JFQ09SRFMgPSAxMDAwMDsNCiAgcHJpdmF0ZSBmaW5hbCBpbnQgcm93U2l6ZSA9IDE1Ow0KICANCiAgcHVibGljIEdlbkRlbE5vdGUoTUlBUEkgbWksIFByb2dyYW1BUEkgcHJvZ3JhbSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIExvZ2dlckFQSSBsb2dnZXIsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyKSB7DQogICAgdGhpcy5taSA9IG1pOw0KCSAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbTsNCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2U7DQogICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7DQogICAgdGhpcy5taUNhbGxlciA9IG1pQ2FsbGVyOw0KICB9DQogIA0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIGludCBDT05PID0gcHJvZ3JhbS5MREFaRC5nZXQoIkNPTk8iKTsNCiAgICBpbnQgSU5PVSA9IDE7DQogICAgbG9uZyBDT05OID0gbWkuaW4uZ2V0KCJDT05OIikgPT0gbnVsbCA/IDAgYXMgbG9uZyA6IG1pLmluLmdldCgiQ09OTiIpIGFzIGxvbmc7DQogICAgbG9uZyBETElYID0gbWkuaW4uZ2V0KCJETElYIikgPT0gbnVsbCA/IDAgYXMgbG9uZyA6IG1pLmluLmdldCgiRExJWCIpIGFzIGxvbmc7DQogICAgbWkub3V0RGF0YS5wdXQoIlRFWFQiLCAiQ09OTiAke0NPTk59Iik7DQogICAgbWkub3V0RGF0YS5wdXQoIlRFWFQiLCAiRExJWCAke0RMSVh9Iik7DQogICAgbWkud3JpdGUoKTsNCiAgICANCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNSERJU0giKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk9RQ09OTiIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgY29udGFpbmVyLnNldCgiT1FDT05PIiwgQ09OTyk7DQogICAgY29udGFpbmVyLnNldCgiT1FJTk9VIiwgSU5PVSk7DQogICAgY29udGFpbmVyLnNldCgiT1FETElYIiwgRExJWCk7DQogICAgDQogICAgaWYoQ09OTiA9PSAwKSB7DQogICAgICBpZihxdWVyeS5yZWFkKGNvbnRhaW5lcikpIHsNCiAgICAgICAgQ09OTiA9IGNvbnRhaW5lci5nZXQoIk9RQ09OTiIpOw0KICAgICAgICANCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG1pLmVycm9yKCJTaGlwbWVudCBjYW5ub3QgYmUgZm91bmQiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0NCiAgICANCiAgICBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNSERJU0giKS5pbmRleCgiMjAiKS5zZWxlY3Rpb24oIk9RQ09OTyIsICJPUUlOT1UiLCAiT1FDT05OIiwgIk9RRExJWCIsICJPUUNPTkEiLCAiT1FST1JDIikuYnVpbGQoKTsNCiAgICBjb250YWluZXIgPSBxdWVyeS5jcmVhdGVDb250YWluZXIoKTsNCiAgICBjb250YWluZXIuc2V0KCJPUUNPTk8iLCBDT05PKTsNCiAgICBjb250YWluZXIuc2V0KCJPUUlOT1UiLCBJTk9VKTsNCiAgICBjb250YWluZXIuc2V0KCJPUUNPTk4iLCBDT05OKTsNCiAgICANCiAgICBpbnQgaW5kZXggPSAzOw0KICAgIA0KICAgIGlmKENPTk4gPT0gMCkgew0KICAgICAgQ09OTiA9IERMSVg7DQogICAgICBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNSERJU0giKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk9RQ09OTyIsICJPUUlOT1UiLCAiT1FDT05OIiwgIk9RRExJWCIsICJPUUNPTkEiKS5idWlsZCgpOw0KICAgICAgY29udGFpbmVyID0gcXVlcnkuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgICBjb250YWluZXIuc2V0KCJPUUNPTk8iLCBDT05PKTsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9RSU5PVSIsIElOT1UpOw0KICAgICAgY29udGFpbmVyLnNldCgiT1FETElYIiwgRExJWCk7DQogICAgICAgICANCiAgICAgIGluZGV4ID0gMzsNCiAgICB9DQogICAgDQogICAgZGVsZXRlUmVjb3Jkc0J5Q09OTihDT05PLCBDT05OLCAiRVhUNDc5Iik7DQogICAgZGVsZXRlUmVjb3Jkc0J5Q09OTihDT05PLCBDT05OLCAiRVhUNDgwIik7DQogICAgDQogICAgZGVsZXRlUmVjb3Jkc0J5Q09OTihDT05PLCBDT05OLCAiRVhUNjE5Iik7DQogICAgZGVsZXRlUmVjb3Jkc0J5Q09OTihDT05PLCBDT05OLCAiRVhUNjIwIik7DQogICAgDQogICAgbWkub3V0RGF0YS5wdXQoIlRFWFQiLCAiJHtDT05OfSAke0RMSVh9Iik7DQogICAgbWkud3JpdGUoKTsNCiAgICANCiAgICBBcnJheUxpc3Q8TWFwPFN0cmluZywgU3RyaW5nPj4gbGluZXMgPSBuZXcgQXJyYXlMaXN0PE1hcDxTdHJpbmcsIFN0cmluZz4+KCk7DQogICAgQXJyYXlMaXN0PE1hcDxTdHJpbmcsIFN0cmluZz4+IGRlbGl2ZXJ5bGluZXMgPSBuZXcgQXJyYXlMaXN0PE1hcDxTdHJpbmcsIFN0cmluZz4+KCk7DQogICAgDQogICAgREJBY3Rpb24gcXVlcnlNSERJU0wgPSBkYXRhYmFzZS50YWJsZSgiTUhESVNMIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJVUkNPTk8iLCAiVVJETElYIiwgIlVSSVROTyIsICJVUlJJRE4iLCAiVVJSSURMIiwgIlVSUExRVCIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyTUhESVNMID0gcXVlcnlNSERJU0wuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgDQogICAgREJBY3Rpb24gcXVlcnlPT0xJTkUgPSBkYXRhYmFzZS50YWJsZSgiT09MSU5FIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJPQk5FUFIiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck9PTElORSA9IHF1ZXJ5T09MSU5FLmNyZWF0ZUNvbnRhaW5lcigpOw0KICAgIA0KICAgIERCQWN0aW9uIHF1ZXJ5T0RMSU5FID0gZGF0YWJhc2UudGFibGUoIk9ETElORSIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiVUJORVBSIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJPRExJTkUgPSBxdWVyeU9ETElORS5jcmVhdGVDb250YWluZXIoKTsNCiAgICANCiAgICBEQkFjdGlvbiBxdWVyeU1JVE1BSCA9IGRhdGFiYXNlLnRhYmxlKCJNSVRNQUgiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkhNVFkxNSIsICJITVRYMTUiLCAiSE1TVFlOIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJNSVRNQUggPSBxdWVyeU1JVE1BSC5jcmVhdGVDb250YWluZXIoKTsNCiAgICANCiAgICBEQkFjdGlvbiBxdWVyeU1JVE1BUyA9IGRhdGFiYXNlLnRhYmxlKCJNSVRNQVMiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk1NSVREUyIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyTUlUTUFTID0gcXVlcnlNSVRNQVMuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgDQogICAgREJBY3Rpb24gcXVlcnlNR0xJTkUgPSBkYXRhYmFzZS50YWJsZSgiTUdMSU5FIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJNUlRXU0wiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1HTElORSA9IHF1ZXJ5TUdMSU5FLmNyZWF0ZUNvbnRhaW5lcigpOw0KICAgIA0KICAgIE1hcCB0b3RhbHMgPSBuZXcgSGFzaE1hcCgpOyANCiAgICBNYXAgcGFnZVRvdGFscyA9IG5ldyBIYXNoTWFwKCk7IA0KICAgIE1hcCB0b3RhbHNQTFFUID0gbmV3IEhhc2hNYXAoKTsgDQogICAgDQogICAgcXVlcnkucmVhZEFsbChjb250YWluZXIsIGluZGV4LCBNQVhfUkVDT1JEUywgeyBEQkNvbnRhaW5lciBtaGRpc2hEYXRhIC0+DQogICAgICBNYXAgcmVzdWx0ID0gbmV3IEhhc2hNYXAoKTsgDQogICAgICANCiAgICAgIGRvdWJsZSB0b3RhbCA9IDA7DQogICAgICBkb3VibGUgdG90YWxQTFFUID0gMDsNCiAgICAgIGludCBST1JDID0gbWhkaXNoRGF0YS5nZXQoIk9RUk9SQyIpIGFzIGludDsNCiAgICAgIGxvbmcgbGluZURMSVggPSBtaGRpc2hEYXRhLmdldCgiT1FETElYIikgYXMgbG9uZzsNCiAgICAgIFN0cmluZyBDT05BID0gbWhkaXNoRGF0YS5nZXQoIk9RQ09OQSIpOw0KICAgICAgDQogICAgICBtaS5vdXREYXRhLnB1dCgiVEVYVCIsICIke0NPTk59ICR7bGluZURMSVh9Iik7DQogICAgICBtaS53cml0ZSgpOw0KICAgICAgDQogICAgICBjb250YWluZXJNSERJU0wuc2V0KCJVUkNPTk8iLCBDT05PKTsNCiAgICAgIGNvbnRhaW5lck1IRElTTC5zZXQoIlVSRExJWCIsIGxpbmVETElYKTsNCiAgICAgIA0KICAgICAgaW50IGN0ciA9IDE7DQogICAgICBpbnQgcGFnZU51bSA9IDE7DQogICAgICBpbnQgbGluZUN0ciA9IDE7DQogICAgDQogICAgICBxdWVyeU1IRElTTC5yZWFkQWxsKGNvbnRhaW5lck1IRElTTCwgMiwgTUFYX1JFQ09SRFMsIHsgREJDb250YWluZXIgbWhkaXNsRGF0YSAtPg0KICAgICAgICBNYXAgcmVzdWx0TGluZSA9IG5ldyBIYXNoTWFwKCk7IA0KICAgICAgICANCiAgICAgICAgZG91YmxlIFBMUVQgPSBtaGRpc2xEYXRhLmdldCgiVVJQTFFUIikgYXMgZG91YmxlOw0KICAgICAgICANCiAgICAgICAgaWYoUExRVCAhPSAwKSB7DQogICAgICAgICAgaWYoY3RyID4gcm93U2l6ZSkgew0KICAgICAgICAgICAgY3RyID0gMTsNCiAgICAgICAgICAgIHBhZ2VOdW0rKzsNCiAgICAgICAgICB9DQogICAgICAgICAgDQogICAgICAgICAgU3RyaW5nIE9STk8gPSBtaGRpc2xEYXRhLmdldCgiVVJSSUROIik7DQogICAgICAgICAgaW50IFJJREwgPSBtaGRpc2xEYXRhLmdldCgiVVJSSURMIikgYXMgaW50Ow0KICAgICAgICAgIFN0cmluZyBJVE5PID0gbWhkaXNsRGF0YS5nZXRTdHJpbmcoIlVSSVROTyIpLnRyaW0oKTsNCiAgICAgICAgICANCiAgICAgICAgICBTdHJpbmcgYmxvY2tObyA9IGdldEJsb2NrKENPTk8sIElUTk8pOw0KICAgICAgICAgIFN0cmluZyBUWTE1ID0gIiI7DQogICAgICAgICAgU3RyaW5nIFRYMTUgPSAiIjsNCiAgICAgICAgICBTdHJpbmcgU1RZTiA9ICIiOw0KICAgICAgICAgIFN0cmluZyBJVERTID0gIiI7DQogICAgICAgICAgDQogICAgICAgICAgY29udGFpbmVyTUlUTUFILnNldCgiSE1DT05PIiwgQ09OTyk7DQogICAgICAgICAgY29udGFpbmVyTUlUTUFILnNldCgiSE1JVE5PIiwgSVROTyk7DQogICAgICAgICAgDQogICAgICAgICAgaWYgKHF1ZXJ5TUlUTUFILnJlYWQoY29udGFpbmVyTUlUTUFIKSkgew0KICAgICAgICAgICAgVFkxNSA9IGNvbnRhaW5lck1JVE1BSC5nZXQoIkhNVFkxNSIpOw0KICAgICAgICAgICAgVFgxNSA9IGNvbnRhaW5lck1JVE1BSC5nZXQoIkhNVFgxNSIpOw0KICAgICAgICAgICAgU1RZTiA9IGNvbnRhaW5lck1JVE1BSC5nZXQoIkhNU1RZTiIpOw0KICAgICAgICAgIH0NCiAgICAgICAgICANCiAgICAgICAgICBjb250YWluZXJNSVRNQVMuc2V0KCJNTUNPTk8iLCBDT05PKTsNCiAgICAgICAgICBjb250YWluZXJNSVRNQVMuc2V0KCJNTUlUTk8iLCBJVE5PKTsNCiAgICAgICAgICANCiAgICAgICAgICBpZiAocXVlcnlNSVRNQVMucmVhZChjb250YWluZXJNSVRNQVMpKSB7DQogICAgICAgICAgICBJVERTID0gY29udGFpbmVyTUlUTUFTLmdldCgiTU1JVERTIik7DQogICAgICAgICAgfQ0KICAgICAgICAgIA0KICAgICAgICAgIGlmKFJPUkMgIT0gMykgew0KICAgICAgICAgICAgY29udGFpbmVyTUdMSU5FLnNldCgiTVJDT05PIiwgQ09OTyk7DQogICAgICAgICAgICBjb250YWluZXJNR0xJTkUuc2V0KCJNUlRSTlIiLCBPUk5PKTsNCiAgICAgICAgICAgIGNvbnRhaW5lck1HTElORS5zZXQoIk1SUE9OUiIsIFJJREwpOw0KICAgICAgICAgICAgY29udGFpbmVyTUdMSU5FLnNldCgiTVJQT1NYIiwgMCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmKHF1ZXJ5TUdMSU5FLnJlYWQoY29udGFpbmVyTUdMSU5FKSkgew0KICAgICAgICAgICAgICBDT05BID0gY29udGFpbmVyTUdMSU5FLmdldCgiTVJUV1NMIik7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIA0KICAgICAgICAgIHJlc3VsdExpbmUucHV0KCJETElYIiwgbGluZURMSVggYXMgU3RyaW5nKTsNCiAgICAgICAgICByZXN1bHRMaW5lLnB1dCgiQ09OQSIsIENPTkEudHJpbSgpKTsNCiAgICAgICAgICByZXN1bHRMaW5lLnB1dCgiT1JOTyIsIE9STk8pOw0KICAgICAgICAgIHJlc3VsdExpbmUucHV0KCJQT05SIiwgUklETCBhcyBTdHJpbmcpOw0KICAgICAgICAgIHJlc3VsdExpbmUucHV0KCJJVE5PIiwgSVROTyk7DQogICAgICAgICAgcmVzdWx0TGluZS5wdXQoIklURFMiLCBJVERTKTsNCiAgICAgICAgICByZXN1bHRMaW5lLnB1dCgiU1RZTiIsIFNUWU4pOw0KICAgICAgICAgIHJlc3VsdExpbmUucHV0KCJUWTE1IiwgVFkxNSk7DQogICAgICAgICAgcmVzdWx0TGluZS5wdXQoIlRYMTUiLCBUWDE1KTsNCiAgICAgICAgICByZXN1bHRMaW5lLnB1dCgiU0VRTiIsIGxpbmVDdHIpOw0KICAgICAgICAgIHJlc3VsdExpbmUucHV0KCJQQUdFIiwgcGFnZU51bSk7DQogICAgICAgICAgDQogICAgICAgICAgaWYoUk9SQyA9PSAzKSB7DQogICAgICAgICAgICBjb250YWluZXJPT0xJTkUuc2V0KCJPQkNPTk8iLCBDT05PKTsNCiAgICAgICAgICAgIGNvbnRhaW5lck9PTElORS5zZXQoIk9CT1JOTyIsIE9STk8pOw0KICAgICAgICAgICAgY29udGFpbmVyT09MSU5FLnNldCgiT0JQT05SIiwgUklETCk7DQogICAgICAgICAgICBjb250YWluZXJPT0xJTkUuc2V0KCJPQlBPU1giLCAwKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYocXVlcnlPT0xJTkUucmVhZChjb250YWluZXJPT0xJTkUpKSB7DQogICAgICAgICAgICAgIGRvdWJsZSBORVBSID0gY29udGFpbmVyT09MSU5FLmdldCgiT0JORVBSIik7IA0KICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgdG90YWwgKz0gTkVQUiAqIFBMUVQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGNvbnRhaW5lck9ETElORS5zZXQoIlVCQ09OTyIsIENPTk8pOw0KICAgICAgICAgICAgY29udGFpbmVyT0RMSU5FLnNldCgiVUJPUk5PIiwgT1JOTyk7DQogICAgICAgICAgICBjb250YWluZXJPRExJTkUuc2V0KCJVQlBPTlIiLCBSSURMKTsNCiAgICAgICAgICAgIGNvbnRhaW5lck9ETElORS5zZXQoIlVCUE9TWCIsIDApOw0KICAgICAgICAgICAgY29udGFpbmVyT0RMSU5FLnNldCgiVUJETElYIiwgbGluZURMSVgpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBxdWVyeU9ETElORS5yZWFkQWxsKGNvbnRhaW5lck9ETElORSwgNSwgMSwgeyBEQkNvbnRhaW5lciBvZGxpbmVEYXRhIC0+DQogICAgICAgICAgICAgIGRvdWJsZSBORVBSID0gb2RsaW5lRGF0YS5nZXQoIlVCTkVQUiIpOyANCiAgICAgICAgICAgICAgDQogICAgICAgICAgICAgIHRvdGFsICs9IE5FUFIgKiBQTFFUOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICAgIA0KICAgICAgICAgIHRvdGFsUExRVCArPSBQTFFUOw0KICAgICAgICAgIA0KICAgICAgICAgIGxpbmVzLmFkZChyZXN1bHRMaW5lKTsNCiAgICAgICAgICANCiAgICAgICAgICBsaW5lQ3RyKys7DQogICAgICAgICAgY3RyKys7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgICAgDQogICAgICBwYWdlVG90YWxzLnB1dChsaW5lRExJWCBhcyBTdHJpbmcsIHBhZ2VOdW0pOw0KICAgICAgdG90YWxzLnB1dChsaW5lRExJWCBhcyBTdHJpbmcsIHRvdGFsKTsNCiAgICAgIA0KICAgICAgdG90YWxzUExRVC5wdXQobGluZURMSVggYXMgU3RyaW5nLCB0b3RhbFBMUVQpOw0KICAgIH0pOw0KICAgDQogICAgaW5zZXJ0RGF0YVRvVGFibGUoQ09OTywgQ09OTiwgbGluZXMsICJNTVM0ODBQRiIsIHRvdGFscywgcGFnZVRvdGFscywgdG90YWxzUExRVCwgIkVYVDQ3OSIsICJFWFQ0ODAiKTsNCiAgICBjb21wdXRlVG90YWxQYWdlKENPTk8sIENPTk4sICJFWFQ0NzkiKTsNCiAgICANCiAgICBpbnNlcnREYXRhVG9UYWJsZShDT05PLCBDT05OLCBsaW5lcywgIk1XUzYyMFBGIiwgdG90YWxzLCBwYWdlVG90YWxzLCB0b3RhbHNQTFFULCAiRVhUNjE5IiwgIkVYVDYyMCIpOw0KICAgIGNvbXB1dGVUb3RhbFBhZ2UoQ09OTywgQ09OTiwgIkVYVDYxOSIpOw0KICB9DQogIA0KICAvKioNCiAgICogR2V0IHRvdGFsIG51bWJlciBvZiBwYWdlcyBmb3IgRVhUNDc5DQogICAqIEBwYXJhbXMgQ09OTyAtIElucHV0IENPTk8NCiAgICogQHBhcmFtcyBDT05OIC0gSW5wdXQgc2hpcG1lbnQgbnVtYmVyDQogICAqIEByZXR1cm4gbm90aGluZw0KICAqLw0KICB2b2lkIGNvbXB1dGVUb3RhbFBhZ2UoaW50IENPTk8sIGxvbmcgQ09OTiwgU3RyaW5nIGhlYWRUYWJsZSkgew0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoaGVhZFRhYmxlKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkVYRExJWCIsICJFWENPTkEiLCAiRVhUWVBFIiwgIkVYUEFHRSIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgY29udGFpbmVyLnNldCgiRVhDT05PIiwgQ09OTyk7DQogICAgY29udGFpbmVyLnNldCgiRVhDT05OIiwgQ09OTik7DQogICAgDQogICAgQXJyYXlMaXN0PE1hcDxTdHJpbmcsIFN0cmluZz4+IGxpbmVzID0gbmV3IEFycmF5TGlzdDxNYXA8U3RyaW5nLCBTdHJpbmc+PigpOw0KICAgIA0KICAgIEFycmF5TGlzdDxNYXA8U3RyaW5nLCBTdHJpbmc+PiBkZWxpdmVyeWxpbmVzID0gbmV3IEFycmF5TGlzdDxNYXA8U3RyaW5nLCBTdHJpbmc+PigpOw0KICAgDQogICAgbG9uZyBjdXJyRExJWCA9IC0xOw0KICAgIGludCBjdHIgPSAwOw0KICAgIGludCBjdXJyVHlwZSA9IC0xOw0KICAgIFN0cmluZyBjdXJyQ09OQSA9IG51bGw7DQogICANCiAgICBxdWVyeS5yZWFkQWxsKGNvbnRhaW5lciwgMiwgTUFYX1JFQ09SRFMsIHsgREJDb250YWluZXIgZGF0YSAtPg0KICAgICAgTWFwIHJlc3VsdCA9IG5ldyBIYXNoTWFwKCk7IA0KICAgICAgDQogICAgICBsb25nIERMSVggPSBkYXRhLmdldCgiRVhETElYIik7DQogICAgICBpbnQgVFlQRSA9IGRhdGEuZ2V0KCJFWFRZUEUiKTsNCiAgICAgIFN0cmluZyBDT05BID0gZGF0YS5nZXQoIkVYQ09OQSIpOw0KICAgICAgDQogICAgICBpZihjdXJyRExJWCA9PSAtMSAmJiBjdXJyVHlwZSA9PSAtMSkgew0KICAgICAgICBjdXJyRExJWCA9IERMSVg7DQogICAgICAgIGN1cnJUeXBlID0gVFlQRTsNCiAgICAgICAgY3VyckNPTkEgPSBDT05BOw0KICAgICAgfQ0KICAgICAgDQogICAgICBpZihjdXJyRExJWCAhPSBETElYIHx8IChjdXJyRExJWCA9PSBETElYICYmIGN1cnJUeXBlICE9IFRZUEUpKSB7DQogICAgICAgIHVwZGF0ZU1heFBhZ2VIZWFkVGFibGUoQ09OTywgQ09OTiwgY3VyckRMSVgsIGN1cnJDT05BLCBjdXJyVHlwZSwgY3RyLCBoZWFkVGFibGUpOw0KICAgICAgICBjdHIgPSAwOw0KICAgICAgICBkZWxpdmVyeWxpbmVzLmNsZWFyKCk7DQogICAgICAgIGN1cnJETElYID0gRExJWDsNCiAgICAgICAgY3VyclR5cGUgPSBUWVBFOw0KICAgICAgICBjdXJyQ09OQSA9IENPTkE7DQogICAgICB9IA0KICAgICAgDQogICAgICByZXN1bHQucHV0KCJETElYIiwgZGF0YS5nZXQoIkVYRExJWCIpIGFzIFN0cmluZyk7DQogICAgICByZXN1bHQucHV0KCJDT05BIiwgZGF0YS5nZXQoIkVYQ09OQSIpKTsNCiAgICAgIHJlc3VsdC5wdXQoIlRZUEUiLCBkYXRhLmdldCgiRVhUWVBFIikgYXMgU3RyaW5nKTsNCiAgICAgIHJlc3VsdC5wdXQoIlBBR0UiLCBkYXRhLmdldCgiRVhQQUdFIikgYXMgU3RyaW5nKTsNCiAgICAgIA0KICAgICAgZGVsaXZlcnlsaW5lcy5hZGQocmVzdWx0KTsNCiAgICAgIA0KICAgICAgY3RyKys7DQogICAgfSk7DQogICAgDQogICAgdXBkYXRlTWF4UGFnZUhlYWRUYWJsZShDT05PLCBDT05OLCBjdXJyRExJWCwgY3VyckNPTkEsIGN1cnJUeXBlLCBjdHIsIGhlYWRUYWJsZSk7DQogIH0NCiAgDQogIC8qKg0KICAgKiBVcGRhdGUgTVhQRywgRFBHTiBpbiBFWFQ0NzkgVGFibGUNCiAgICogQHBhcmFtcyBDT05PIC0gSW5wdXQgQ09OTw0KICAgKiBAcGFyYW1zIENPTk4gLSBJbnB1dCBzaGlwbWVudCBudW1iZXINCiAgICogQHBhcmFtcyBETElYIC0gSW5wdXQgZGVsaXZlcnkgbnVtYmVyDQogICAqIEBwYXJhbXMgdmFsIC0gSW5wdXQgdG90YWwgcGFnZXMNCiAgICogQHJldHVybiBub3RoaW5nDQogICovDQogIHZvaWQgdXBkYXRlTWF4UGFnZUhlYWRUYWJsZShpbnQgQ09OTywgbG9uZyBDT05OLCBsb25nIERMSVgsIFN0cmluZyBDT05BLCBpbnQgVFlQRSwgaW50IHZhbCwgU3RyaW5nIGhlYWRUYWJsZSkgew0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoaGVhZFRhYmxlKS5pbmRleCgiMDAiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTyIsIENPTk8pOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTiIsIENPTk4pOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYRExJWCIsIERMSVgpOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OQSIsIENPTkEpOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYVFlQRSIsIFRZUEUpOw0KICAgIA0KICAgIGludCBjdHIgPSAxOw0KICAgIA0KICAgIENsb3N1cmU8Pz4gdXBkYXRlQ2FsbEJhY2sgPSB7IExvY2tlZFJlc3VsdCBsb2NrZWRSZXN1bHQgLT4NCiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYTVhQRyIsIHZhbCk7DQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWERQR04iLCBjdHIpOw0KICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDSE5PIiwgKGludClsb2NrZWRSZXN1bHQuZ2V0KCJFWENITk8iKSArIDEpOw0KICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhMTURUIiwgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKTsNCiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYQ0hJRCIsIHByb2dyYW0uZ2V0VXNlcigpKTsNCiAgICAgIA0KICAgICAgbG9ja2VkUmVzdWx0LnVwZGF0ZSgpOw0KICAgICAgY3RyKys7DQogICAgfTsNCiAgICANCiAgICBxdWVyeS5yZWFkQWxsTG9jayhjb250YWluZXIsIDUsIHVwZGF0ZUNhbGxCYWNrKTsNCiAgfQ0KICANCiAgLyoqDQogICAqIENoZWNrIENPTkEtQ29uc2lnbmVlIGlmIHN0YXJ0cyB3aXRoIDIzMDEgb3IgMjMwMg0KICAgKiBAcGFyYW1zIENPTkEgLSBJbnB1dCBjb25zaWduZWUNCiAgICogQHBhcmFtcyBDT05OIC0gSW5wdXQgc2hpcG1lbnQgbnVtYmVyDQogICAqIEByZXR1cm4gYm9vbGVhbg0KICAqLw0KICBib29sZWFuIGNoZWNrQ09OQShTdHJpbmcgQ09OQSkgew0KICAgIGlmKENPTkEubGVuZ3RoKCkgPj0gNCkgew0KICAgICAgY2hhcltdIGNoID0gQ09OQS50b0NoYXJBcnJheSgpOw0KICAgICAgaWYoY2hbMF0gPT0gJzInICYmIGNoWzFdID09ICczJyAmJiBjaFsyXSA9PSAnMCcgJiYgY2hbM10gPT0gJzInKSB7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KICB9DQogIA0KICAvKioNCiAgICogSW5zZXJ0IGRhdGEgdG8gdGhlIEVYVDQ4MCB0YWJsZQ0KICAgKiBAcGFyYW1zIENPTk8gLSBJbnB1dCBjb21wYW55DQogICAqIEBwYXJhbXMgQ09OTiAtIElucHV0IHNoaXBtZW50IG51bWJlcg0KICAgKiBAcGFyYW1zIGxpbmVzIC0gY29udGFpbmluZyB0aGUgbGluZXMgdG8gYmUgaW5zZXJ0ZWQNCiAgICogQHJldHVybiBub3RoaW5nDQogICovDQogIHZvaWQgaW5zZXJ0RGF0YVRvVGFibGUoaW50IENPTk8sIGxvbmcgQ09OTiwgQXJyYXlMaXN0PE1hcDxTdHJpbmcsIFN0cmluZz4+IGxpbmVzLCBTdHJpbmcgUEYsIE1hcCB0b3RhbHMsIE1hcCBwYWdlVG90YWxzLCBNYXAgdG90YWxzUExRVCwgU3RyaW5nIGhlYWRUYWJsZSwgU3RyaW5nIGxpbmVUYWJsZSkgew0KICAgIERCQWN0aW9uIGxpbmVRdWVyeSA9IGRhdGFiYXNlLnRhYmxlKGxpbmVUYWJsZSkuaW5kZXgoIjAwIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBsaW5lQ29udGFpbmVyID0gbGluZVF1ZXJ5LmdldENvbnRhaW5lcigpOw0KICAgIGxpbmVDb250YWluZXIuc2V0KCJFWENPTk8iLCBDT05PKTsNCiAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhDT05OIiwgQ09OTik7DQogICAgDQogICAgREJBY3Rpb24gaGVhZFF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoaGVhZFRhYmxlKS5pbmRleCgiMDAiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGhlYWRDb250YWluZXIgPSBoZWFkUXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgaGVhZENvbnRhaW5lci5zZXQoIkVYQ09OTyIsIENPTk8pOw0KICAgIGhlYWRDb250YWluZXIuc2V0KCJFWENPTk4iLCBDT05OKTsNCiAgICANCiAgICBmb3IgKGludCBpPTA7IGk8bGluZXMuc2l6ZSgpOyBpKyspIHsNCiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcmVjb3JkID0gKE1hcDxTdHJpbmcsIFN0cmluZz4pIGxpbmVzW2ldOw0KICAgICAgDQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhETElYIiwgcmVjb3JkLkRMSVggYXMgbG9uZyk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhDT05BIiwgcmVjb3JkLkNPTkEpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYUEFHRSIsIHJlY29yZC5QQUdFIGFzIGludCk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhPUk5PIiwgcmVjb3JkLk9STk8pOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYUE9OUiIsIHJlY29yZC5QT05SIGFzIGludCk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhJVE5PIiwgcmVjb3JkLklUTk8gYXMgU3RyaW5nKTsNCiAgICAgIA0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYSVREUyIsIHJlY29yZC5JVERTKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWFNUWU4iLCByZWNvcmQuU1RZTik7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhUWTE1IiwgcmVjb3JkLlRZMTUpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYVFgxNSIsIHJlY29yZC5UWDE1KTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWFNFUU4iLCByZWNvcmQuU0VRTiBhcyBpbnQpOw0KICAgICAgDQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhSR0RUIiwgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWFJHVE0iLCBMb2NhbFRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWExNRFQiLCBMb2NhbERhdGUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQ0hOTyIsIDApOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQ0hJRCIsIHByb2dyYW0uZ2V0VXNlcigpKTsNCiAgICAgIA0KICAgICAgaGVhZENvbnRhaW5lci5zZXQoIkVYRExJWCIsIHJlY29yZC5ETElYIGFzIGxvbmcpOw0KICAgICAgaGVhZENvbnRhaW5lci5zZXQoIkVYQ09OQSIsIHJlY29yZC5DT05BKTsNCiAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWFBBR0UiLCByZWNvcmQuUEFHRSBhcyBpbnQpOw0KICAgICAgDQogICAgICBpZihyZWNvcmQuUEFHRSBhcyBpbnQgPT0gcGFnZVRvdGFscy5nZXQocmVjb3JkLkRMSVggYXMgU3RyaW5nKSBhcyBpbnQpIHsNCiAgICAgICAgaGVhZENvbnRhaW5lci5zZXQoIkVYQU1OVCIsIHRvdGFscy5nZXQocmVjb3JkLkRMSVggYXMgU3RyaW5nKSBhcyBkb3VibGUpOw0KICAgICAgICBoZWFkQ29udGFpbmVyLnNldCgiRVhQTFFUIiwgdG90YWxzUExRVC5nZXQocmVjb3JkLkRMSVggYXMgU3RyaW5nKSBhcyBkb3VibGUpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgaGVhZENvbnRhaW5lci5zZXQoIkVYQU1OVCIsIDApOw0KICAgICAgICBoZWFkQ29udGFpbmVyLnNldCgiRVhQTFFUIiwgdG90YWxzUExRVC5nZXQocmVjb3JkLkRMSVggYXMgU3RyaW5nKSBhcyBkb3VibGUpOw0KICAgICAgfQ0KICAgICAgDQogICAgICBoZWFkQ29udGFpbmVyLnNldCgiRVhSR0RUIiwgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKTsNCiAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWFJHVE0iLCBMb2NhbFRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpKTsNCiAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWExNRFQiLCBMb2NhbERhdGUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpOw0KICAgICAgaGVhZENvbnRhaW5lci5zZXQoIkVYQ0hOTyIsIDApOw0KICAgICAgaGVhZENvbnRhaW5lci5zZXQoIkVYQ0hJRCIsIHByb2dyYW0uZ2V0VXNlcigpKTsNCiAgICAgIA0KICAgICAgaWYoUEYuZXF1YWxzKCJNTVM0ODBQRiIpICYmIGNoZWNrQ09OQShyZWNvcmQuQ09OQSkpIHsNCiAgICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYVFlQRSIsIDEpOw0KICAgICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhBTU5UIiwgOTkuOTkpOw0KICAgICAgICBoZWFkQ29udGFpbmVyLnNldCgiRVhUWVBFIiwgMSk7DQogICAgICANCiAgICAgIGlmKCFoZWFkUXVlcnkucmVhZChoZWFkQ29udGFpbmVyKSl7DQogICAgICAgIGhlYWRRdWVyeS5pbnNlcnQoaGVhZENvbnRhaW5lcik7DQogICAgICB9DQogICAgICAgICAgICAgIA0KICAgICAgaWYoIWxpbmVRdWVyeS5yZWFkKGxpbmVDb250YWluZXIpKXsNCiAgICAgICAgbGluZVF1ZXJ5Lmluc2VydChsaW5lQ29udGFpbmVyKTsNCiAgICAgIH0NCiAgICAgIA0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYVFlQRSIsIDEpOw0KICAgICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhBTU5UIiwgOTkuOTkpOw0KICAgICAgICBoZWFkQ29udGFpbmVyLnNldCgiRVhUWVBFIiwgMSk7DQogICAgICAgIA0KICAgICAgICBpZighaGVhZFF1ZXJ5LnJlYWQoaGVhZENvbnRhaW5lcikpew0KICAgICAgICAgIGhlYWRRdWVyeS5pbnNlcnQoaGVhZENvbnRhaW5lcik7DQogICAgICAgIH0NCiAgICAgICAgICAgICAgDQogICAgICAgIGlmKCFsaW5lUXVlcnkucmVhZChsaW5lQ29udGFpbmVyKSl7DQogICAgICAgICAgbGluZVF1ZXJ5Lmluc2VydChsaW5lQ29udGFpbmVyKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYVFlQRSIsIDIpOw0KICAgICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhBTU5UIiwgMCk7DQogICAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWFRZUEUiLCAyKTsNCiAgICAgICAgDQogICAgICAgIGlmKCFoZWFkUXVlcnkucmVhZChoZWFkQ29udGFpbmVyKSl7DQogICAgICAgICAgaGVhZFF1ZXJ5Lmluc2VydChoZWFkQ29udGFpbmVyKTsNCiAgICAgICAgfQ0KICAgICAgICAgICAgICANCiAgICAgICAgaWYoIWxpbmVRdWVyeS5yZWFkKGxpbmVDb250YWluZXIpKXsNCiAgICAgICAgICBsaW5lUXVlcnkuaW5zZXJ0KGxpbmVDb250YWluZXIpOw0KICAgICAgICB9DQogICAgICB9DQogICAgIA0KICAgIH0NCiAgfQ0KICANCiAgLyoqDQogICAqIEdldCBNTUNGSTQgLSBCbG9jayBudW1iZXIgZnJvbSBNSVRNQVMNCiAgICogQHBhcmFtcyBDT05PIC0gSW5wdXQgY29tcGFueQ0KICAgKiBAcGFyYW1zIElUTk8gLSBJbnB1dCBpdGVtIG51bWJlcg0KICAgKiBAcmV0dXJuIGJsb2NrDQogICovDQogIFN0cmluZyBnZXRCbG9jayhpbnQgQ09OTywgU3RyaW5nIElUTk8pIHsNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNSVRNQVMiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk1NQ0ZJNCIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgY29udGFpbmVyLnNldCgiTU1DT05PIiwgQ09OTyk7DQogICAgY29udGFpbmVyLnNldCgiTU1JVE5PIiwgSVROTyk7DQogICAgDQogICAgU3RyaW5nIGJsb2NrID0gIiI7DQogICAgDQogICAgaWYgKHF1ZXJ5LnJlYWQoY29udGFpbmVyKSkgew0KICAgICAgYmxvY2sgPSBjb250YWluZXIuZ2V0KCJNTUNGSTQiKTsNCiAgICB9DQogICAgDQogICAgcmV0dXJuIGJsb2NrOw0KICB9DQogIA0KICAvKioNCiAgICogRGVsZXRlIGFsbCByZWNvcmRzIGRlcGVuZGluZyBvbiBDT05ODQogICAqIEBwYXJhbXMgQ09OTyAtIElucHV0IGNvbXBhbnkNCiAgICogQHBhcmFtcyBDT05OIC0gSW5wdXQgc2hpcG1lbnQgbnVtYmVyDQogICAqIEBwYXJhbXMgdGFibGUgLSBJbnB1dCBYdGVuZCBUYWJsZQ0KICAgKiBAcmV0dXJuIG5vdGhpbmcNCiAgKi8NCiAgdm9pZCBkZWxldGVSZWNvcmRzQnlDT05OKGludCBDT05PLCBsb25nIENPTk4sIFN0cmluZyB0YWJsZSkgew0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUodGFibGUpLmluZGV4KCIwMCIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgY29udGFpbmVyLnNldCgiRVhDT05PIiwgQ09OTyk7DQogICAgY29udGFpbmVyLnNldCgiRVhDT05OIiwgQ09OTik7DQogICAgDQogICAgQ2xvc3VyZTw/PiBkZWxldGVSZWNvcmRzID0ge0xvY2tlZFJlc3VsdCByZXN1bHQgLT4NCiAgICAgIHJlc3VsdC5kZWxldGUoKTsNCiAgICB9DQogICAgDQogICAgcXVlcnkucmVhZEFsbExvY2soY29udGFpbmVyLCAyLCBkZWxldGVSZWNvcmRzKTsNCiAgfQ0KICANCiAgDQogIA0KfQ0KDQoNCg0K"}}}