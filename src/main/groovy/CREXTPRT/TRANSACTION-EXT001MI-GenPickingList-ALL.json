{"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"GenPickingList":{"sourceUuid":"9fb0d7fe-0796-4803-9476-1366ccc20bc8","name":"GenPickingList","program":"EXT001MI","description":"GenPickingList","active":true,"multi":true,"modified":1723883226242,"modifiedBy":"INFNIXONG","outputFields":[{"name":"TEXT","description":"text","length":600,"mandatory":false,"type":"A"}],"inputFields":[{"name":"CONO","description":"company","length":3,"mandatory":false,"type":"N"},{"name":"DLIX","description":"delivery number","length":11,"mandatory":false,"type":"N"},{"name":"CONN","description":"shipment","length":7,"mandatory":false,"type":"N"}],"utilities":[],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"9fb0d7fe-0796-4803-9476-1366ccc20bc8":{"uuid":"9fb0d7fe-0796-4803-9476-1366ccc20bc8","updated":1724928404648,"updatedBy":"INFNIXONG","created":1723624243400,"createdBy":"INFNIXONG","apiVersion":"0.21","beVersion":"16.0.0.20240621022400.6","language":"GROOVY","codeHash":"894C547C22E956750789179DDDE16DE0E08D492E69163996CB21D373277784E2","code":"LyoqDQoqICBATmFtZTogRVhUMDAxTUkuR2VuUGlja2luZ0xpc3QNCiogIEBEZXNjcmlwdGlvbjogRXh0ZW5kT3V0cHV0IGZvciBNV1M0MzVQRg0KKiAgQEF1dGhvcnM6IE5peG9uIFBvd2VyIE9uZw0KKi8NCg0KLyoqDQoqIENIQU5HRUxPR1MNCiogVmVyc2lvbiAgICBEYXRlICAgIFVzZXIgICAgICAgICAgICAgICBEZXNjcmlwdGlvbg0KKiAxLjAuMCAgICAgIDI0MDMxNSAgTml4b24gUG93ZXIgT25nICAgIEluaXRpYWwgUmVsZWFzZQ0KKiAxLjAuMSAgICAgIDI0MDUwOCAgTml4b24gUG93ZXIgT25nICAgIEFmdGVyIFh0ZW5kTTMgcmV2aWV3DQoqIDEuMS4wICAgICAgMjQwNTIzICBOaXhvbiBQb3dlciBPbmcgICAgQWRkaXRpb25hbCBsb2dpYw0KKiAxLjEuMSAgICAgIDI0MDUyOCAgTml4b24gUG93ZXIgT25nICAgIENoYW5nZWQgc25ha2UgY2FzZSB2YXJpYWJsZSB0byBsb3dlciBjYW1lbCBjYXNlDQoqIDEuMS4yICAgICAgMjQwNjA2ICBOaXhvbiBQb3dlciBPbmcgICAgQWRkZWQgbG9naWMgZm9yIE0wMSBNTVM0ODBQRg0KKiAxLjEuMyAgICAgIDI0MDYwNyAgTml4b24gUG93ZXIgT25nICAgIENhc3QgSVROTyB0byBTdHJpbmcNCiogMS4xLjQgICAgICAyNDA2MjAgIE5peG9uIFBvd2VyIE9uZyAgICBDb3VudCBwYWdlIHBlciB0eXBlIDEsMiwzOyBBZGRlZCBQTFFUIE1NUzQ4MFBGDQoqIDEuMS41ICAgICAgMjQwNzA1ICBOaXhvbiBQb3dlciBPbmcgICAgQWRkZWQgbmV3IGZpZWxkcyBmb3IgTU1TNDgwUEYgRVhUNDgwIHRhYmxlDQoqIDEuMS42ICAgICAgMjQwNzExICBOaXhvbiBQb3dlciBPbmcgICAgQWRkZWQgU0VRTiBmb3IgRVhUNDgwDQoqIDEuMS43ICAgICAgMjQwNzIyICBOaXhvbiBQb3dlciBPbmcgICAgQWRkZWQgbG9naWMgZm9yIEFSUzE5OVBGdjENCiogMi4wLjAgICAgICAyNDA3MjkgIE5peG9uIFBvd2VyIE9uZyAgICBBZGRlZCBDT0FGIGZvciBFWFQ0MzQsNDM1LDQzNiBQaWNraW5nIExpc3QNCiogMi4wLjEgICAgICAyNDA3MjkgIE5peG9uIFBvd2VyIE9uZyAgICBSZW1vdmVkIEVYVERFTCB2YWxpZGF0aW9uLCBBZGRlZCBTQVBSIGZyb20gT1BSSUNMDQoqIDIuMC4yICAgICAgMjQwODAxICBOaXhvbiBQb3dlciBPbmcgICAgUmVmcmVzaCBFWFQ0NzksRVhUNDgwIHdoZW4gcHJpbnRpbmcgRE4gd2l0aCBkZWxldGVkIGxpbmUNCiogMi4wLjMgICAgICAyNDA4MjIgIE5peG9uIFBvd2VyIE9uZyAgICBST1JDICE9IDMgZ2V0IE1SVFdTTCBhcyBDT05BLCBtb3ZlZCBmcm9tIENSRVhQUlQgdG8gVHJhbnNhY3Rpb24NCiovDQoNCmltcG9ydCBqYXZhLnV0aWwuKjsNCmltcG9ydCBqYXZhLnV0aWwucmVnZXguKjsNCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlOw0KaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lOw0KaW1wb3J0IGphdmEudGltZS5Mb2NhbFRpbWU7DQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZUZvcm1hdHRlcjsNCmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lUGFyc2VFeGNlcHRpb247DQoNCnB1YmxpYyBjbGFzcyBHZW5QaWNraW5nTGlzdCBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pOw0KICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbTsNCiAgcHJpdmF0ZSBmaW5hbCBEYXRhYmFzZUFQSSBkYXRhYmFzZTsNCiAgcHJpdmF0ZSBmaW5hbCBMb2dnZXJBUEkgbG9nZ2VyOw0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyOw0KICANCiAgcHJpdmF0ZSBmaW5hbCBpbnQgTUFYX1JFQ09SRFMgPSAxMDAwMDsNCiAgcHJpdmF0ZSBmaW5hbCBpbnQgcm93U2l6ZSA9IDE1Ow0KICANCiAgcHVibGljIEdlblBpY2tpbmdMaXN0KE1JQVBJIG1pLCBQcm9ncmFtQVBJIHByb2dyYW0sIERhdGFiYXNlQVBJIGRhdGFiYXNlLCBMb2dnZXJBUEkgbG9nZ2VyLCBNSUNhbGxlckFQSSBtaUNhbGxlcikgew0KICAgIHRoaXMubWkgPSBtaTsNCgkgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07DQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlOw0KICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyOw0KICAgIHRoaXMubWlDYWxsZXIgPSBtaUNhbGxlcjsNCiAgfQ0KICANCiAgcHVibGljIHZvaWQgbWFpbigpIHsNCiAgICBpbnQgQ09OTyA9IHByb2dyYW0uTERBWkQuZ2V0KCJDT05PIik7DQogICAgaW50IElOT1UgPSAxOw0KICAgIGludCBDT05OID0gbWkuaW4uZ2V0KCJDT05OIikgPT0gbnVsbCA/IDAgOiBtaS5pbi5nZXQoIkNPTk4iKSBhcyBpbnQ7DQogICAgbG9uZyBETElYID0gbWkuaW4uZ2V0KCJETElYIikgPT0gbnVsbCA/IDAgYXMgbG9uZyA6IG1pLmluLmdldCgiRExJWCIpIGFzIGxvbmc7DQogICAgDQogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUhESVNIIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJPUUNPTk4iKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmNyZWF0ZUNvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lci5zZXQoIk9RQ09OTyIsIENPTk8pOw0KICAgIGNvbnRhaW5lci5zZXQoIk9RSU5PVSIsIElOT1UpOw0KICAgIGNvbnRhaW5lci5zZXQoIk9RRExJWCIsIERMSVgpOw0KICAgIA0KICAgIGlmKENPTk4gPT0gMCkgew0KICAgICAgaWYocXVlcnkucmVhZChjb250YWluZXIpKSB7DQogICAgICAgIENPTk4gPSBjb250YWluZXIuZ2V0KCJPUUNPTk4iKTsNCiAgICAgICAgDQogICAgICAgDQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5lcnJvcigic2hpcG1lbnQgY2FudCBiZSBmb3VuZCIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgfQ0KICAgIA0KICAgIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1IRElTSCIpLmluZGV4KCIyMCIpLnNlbGVjdGlvbigiT1FDT05PIiwgIk9RSU5PVSIsICJPUUNPTk4iLCAiT1FETElYIiwgIk9RQ09OQSIsICJPUVBHUlMiLCAiT1FDT0FGIiwgIk9RRFNEVCIpLmJ1aWxkKCk7DQogICAgY29udGFpbmVyID0gcXVlcnkuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgY29udGFpbmVyLnNldCgiT1FDT05PIiwgQ09OTyk7DQogICAgY29udGFpbmVyLnNldCgiT1FJTk9VIiwgSU5PVSk7DQogICAgY29udGFpbmVyLnNldCgiT1FDT05OIiwgQ09OTik7DQogICAgICAgDQogICAgaW50IGluZGV4ID0gMzsNCiAgICANCiAgICBpZihDT05OID09IDApIHsNCiAgICAgIENPTk4gPSBETElYIGFzIGludDsNCiAgICAgIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1IRElTSCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiT1FDT05PIiwgIk9RSU5PVSIsICJPUUNPTk4iLCAiT1FETElYIiwgIk9RQ09OQSIsICJPUVBHUlMiLCAiT1FDT0FGIiwgIk9RRFNEVCIpLmJ1aWxkKCk7DQogICAgICBjb250YWluZXIgPSBxdWVyeS5jcmVhdGVDb250YWluZXIoKTsNCiAgICAgIGNvbnRhaW5lci5zZXQoIk9RQ09OTyIsIENPTk8pOw0KICAgICAgY29udGFpbmVyLnNldCgiT1FJTk9VIiwgSU5PVSk7DQogICAgICBjb250YWluZXIuc2V0KCJPUURMSVgiLCBETElYKTsNCiAgICAgICAgIA0KICAgICAgaW5kZXggPSAzOw0KICAgIH0NCiAgICANCiAgICBkZWxldGVSZWNvcmRzQnlDT05OKENPTk8sIENPTk4sICJFWFQ0MzQiKTsNCiAgICBkZWxldGVSZWNvcmRzQnlDT05OKENPTk8sIENPTk4sICJFWFQ0MzUiKTsNCiAgICBkZWxldGVSZWNvcmRzQnlDT05OKENPTk8sIENPTk4sICJFWFQ0MzYiKTsNCiAgICANCiAgICBkZWxldGVSZWNvcmRzQnlETElYKENPTk8sIERMSVgsICJFWFREMzQiKTsNCiAgICBkZWxldGVSZWNvcmRzQnlETElYKENPTk8sIERMSVgsICJFWFREMzUiKTsNCiAgICBkZWxldGVSZWNvcmRzQnlETElYKENPTk8sIERMSVgsICJFWFREMzYiKTsNCiAgICANCiAgICBBcnJheUxpc3Q8TWFwPFN0cmluZywgU3RyaW5nPj4gbGluZXMgPSBuZXcgQXJyYXlMaXN0PE1hcDxTdHJpbmcsIFN0cmluZz4+KCk7DQogICAgQXJyYXlMaXN0PE1hcDxTdHJpbmcsIFN0cmluZz4+IGRlbGl2ZXJ5bGluZXMgPSBuZXcgQXJyYXlMaXN0PE1hcDxTdHJpbmcsIFN0cmluZz4+KCk7DQogICAgDQogICAgREJBY3Rpb24gcXVlcnlNSERJU0wgPSBkYXRhYmFzZS50YWJsZSgiTUhESVNMIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJVUkNPTk8iLCAiVVJETElYIiwgIlVSSVROTyIsICJVUlJJRE4iLCAiVVJSSURMIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJNSERJU0wgPSBxdWVyeU1IRElTTC5jcmVhdGVDb250YWluZXIoKTsNCiAgICANCiAgICBEQkFjdGlvbiBxdWVyeU1JVE1BSCA9IGRhdGFiYXNlLnRhYmxlKCJNSVRNQUgiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkhNVFkxNSIsICJITVRYMTUiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1JVE1BSCA9IHF1ZXJ5TUlUTUFILmNyZWF0ZUNvbnRhaW5lcigpOw0KICAgIA0KICAgIHF1ZXJ5LnJlYWRBbGwoY29udGFpbmVyLCBpbmRleCwgTUFYX1JFQ09SRFMsIHsgREJDb250YWluZXIgbWhkaXNoRGF0YSAtPg0KICAgICAgTWFwIHJlc3VsdCA9IG5ldyBIYXNoTWFwKCk7IA0KICAgICAgDQogICAgICBsb25nIGxpbmVETElYID0gbWhkaXNoRGF0YS5nZXQoIk9RRExJWCIpIGFzIGxvbmc7DQogICAgICBTdHJpbmcgQ09OQSA9IG1oZGlzaERhdGEuZ2V0KCJPUUNPTkEiKTsNCiAgICAgIGludCBPUVBHUlMgPSAgbWhkaXNoRGF0YS5nZXQoIk9RUEdSUyIpIGFzIGludDsNCiAgICAgIFN0cmluZyBDT0FGID0gbWhkaXNoRGF0YS5nZXQoIk9RQ09BRiIpOw0KICAgICAgaW50IERTRFQgPSBtaGRpc2hEYXRhLmdldCgiT1FEU0RUIik7DQogICAgICANCiAgICAgIG1pLm91dERhdGEucHV0KCJURVhUIiwgIiR7Q09OTn0gJHtsaW5lRExJWH0iKTsNCiAgICAgIG1pLndyaXRlKCk7DQogICAgICANCiAgICAgIA0KICAgICAgY29udGFpbmVyTUhESVNMLnNldCgiVVJDT05PIiwgQ09OTyk7DQogICAgICBjb250YWluZXJNSERJU0wuc2V0KCJVUkRMSVgiLCBsaW5lRExJWCk7DQogICAgICBpbnQgY3RyID0gMTsNCiAgICAgIGludCBwYWdlTnVtID0gMTsNCiAgICAgIA0KICAgICAgcXVlcnlNSERJU0wucmVhZEFsbChjb250YWluZXJNSERJU0wsIDIsIE1BWF9SRUNPUkRTLCB7IERCQ29udGFpbmVyIG1oZGlzbERhdGEgLT4NCiAgICAgICAgaWYoT1FQR1JTID49IDUwKSB7DQogICAgICAgICAgTWFwIHJlc3VsdExpbmUgPSBuZXcgSGFzaE1hcCgpOyANCiAgICAgICAgICANCiAgICAgICAgICAvLyBDb252ZXJ0cyBJVE5PIHRvIGEgc29ydGFibGUgaW50ZWdlciAoZXguIDEwMTEyMzQgMSAtPiAxMDExMjM0MDEsIDEwMTEyMzQgMjIgLT4gMTAxMTIzNDIyKQ0KICAgICAgICAgIFN0cmluZyBJVE5PID0gbWhkaXNsRGF0YS5nZXQoIlVSSVROTyIpOw0KICAgICAgICAgIFN0cmluZyBJVE4gPSBJVE5PLnJlcGxhY2VBbGwoIlxccysiLCAiICIpOw0KICAgICAgICAgIFN0cmluZ1tdIGl0bm9zID0gSVROLnNwbGl0KCIgIik7DQogICAgICAgICAgU3RyaW5nIG51bVN0cmluZyA9ICIiOw0KICAgICAgICAgIFN0cmluZyBJVE4yID0gIiI7DQogICAgICAgICAgaWYoaXRub3MubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgaWYoaXRub3NbMV0uaXNOdW1iZXIoKSl7DQogICAgICAgICAgICAgIGludCBudW0gPSBpdG5vc1sxXSBhcyBpbnQ7DQogICAgICAgICAgICAgIA0KICAgICAgICAgICAgICBpZihudW0gPCAxMCkgew0KICAgICAgICAgICAgICAgIG51bVN0cmluZyA9ICIwIiArIG51bTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBudW1TdHJpbmcgPSBudW07DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgSVROMiA9IGl0bm9zWzBdICsgbnVtU3RyaW5nOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgSVROMiA9IElUTjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgSVROMiA9IElUTk87DQogICAgICAgICAgfQ0KICAgICAgICAgIA0KICAgICAgICAgIGRvdWJsZSBTQVBSID0gMDsNCiAgICAgICAgICANCiAgICAgICAgICBFeHByZXNzaW9uRmFjdG9yeSBleHBPUFJJQ0wgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiT1BSSUNMIik7DQogICAgICAgICAgZXhwT1BSSUNMID0gZXhwT1BSSUNMLmVxKCJPTVBSUkYiLCAiSk8iKS5hbmQoZXhwT1BSSUNMLmVxKCJPTUNVTk8iLCAiIikuYW5kKGV4cE9QUklDTC5sZSgiT01GVkRUIiwgRFNEVCBhcyBTdHJpbmcpLmFuZChleHBPUFJJQ0wuZ2UoIk9NTFZEVCIsIERTRFQgYXMgU3RyaW5nKSkpKTsNCiAgICAgICAgICANCiAgICAgICAgICBEQkFjdGlvbiBxdWVyeU9QUklDTCA9IGRhdGFiYXNlLnRhYmxlKCJPUFJJQ0wiKS5tYXRjaGluZyhleHBPUFJJQ0wpLmluZGV4KCI2MCIpLnNlbGVjdGlvbigiT01TQVBSIikuYnVpbGQoKTsNCiAgICAgICAgICBEQkNvbnRhaW5lciBjb250YWluZXJPUFJJQ0wgPSBxdWVyeU9QUklDTC5jcmVhdGVDb250YWluZXIoKTsNCiAgICAgICAgICBjb250YWluZXJPUFJJQ0wuc2V0KCJPTUNPTk8iLCBDT05PKTsNCiAgICAgICAgICBjb250YWluZXJPUFJJQ0wuc2V0KCJPTUlUTk8iLCBJVE5PKTsNCiAgICAgICAgICANCiAgICAgICAgICBxdWVyeU9QUklDTC5yZWFkQWxsKGNvbnRhaW5lck9QUklDTCwgMiwgMSwgeyBEQkNvbnRhaW5lciBkYXRhT1BSSUNMIC0+DQogICAgICAgICAgICBTQVBSID0gZGF0YU9QUklDTC5nZXQoIk9NU0FQUiIpOw0KICAgICAgICAgIH0pOw0KICAgICAgICANCiAgICAgICAgICBTdHJpbmcgYmxvY2tObyA9IGdldEJsb2NrKENPTk8sIElUTk8pOw0KICAgICAgICAgIFN0cmluZyBjb2xvciA9ICIiOw0KICAgICAgICAgIFN0cmluZyBzaXplID0gIiI7DQogICAgICAgICAgDQogICAgICAgICAgY29udGFpbmVyTUlUTUFILnNldCgiSE1DT05PIiwgQ09OTyk7DQogICAgICAgICAgY29udGFpbmVyTUlUTUFILnNldCgiSE1JVE5PIiwgSVROTyk7DQogICAgICAgICAgDQogICAgICAgICAgaWYgKHF1ZXJ5TUlUTUFILnJlYWQoY29udGFpbmVyTUlUTUFIKSkgew0KICAgICAgICAgICAgY29sb3IgPSBjb250YWluZXJNSVRNQUguZ2V0KCJITVRZMTUiKTsNCiAgICAgICAgICAgIHNpemUgPSBjb250YWluZXJNSVRNQUguZ2V0KCJITVRYMTUiKTsNCiAgICAgICAgICB9DQogICAgICAgICAgDQogICAgICAgICAgcmVzdWx0TGluZS5wdXQoIkRMSVgiLCBsaW5lRExJWCk7DQogICAgICAgICAgcmVzdWx0TGluZS5wdXQoIkNPTkEiLCBDT05BLnRyaW0oKSk7DQogICAgICAgICAgcmVzdWx0TGluZS5wdXQoIk9STk8iLCBtaGRpc2xEYXRhLmdldCgiVVJSSUROIikpOw0KICAgICAgICAgIHJlc3VsdExpbmUucHV0KCJQT05SIiwgbWhkaXNsRGF0YS5nZXQoIlVSUklETCIpIGFzIFN0cmluZyk7DQogICAgICAgICAgcmVzdWx0TGluZS5wdXQoIklUTk8iLCBJVE5PIGFzIFN0cmluZyk7DQogICAgICAgICAgcmVzdWx0TGluZS5wdXQoIklUTjIiLCBJVE4yIGFzIFN0cmluZyk7DQogICAgICAgICAgcmVzdWx0TGluZS5wdXQoIkNGSTQiLCBibG9ja05vKTsNCiAgICAgICAgICByZXN1bHRMaW5lLnB1dCgiQ09MUiIsIGNvbG9yKTsNCiAgICAgICAgICByZXN1bHRMaW5lLnB1dCgiU0laRSIsIHNpemUpOw0KICAgICAgICAgIHJlc3VsdExpbmUucHV0KCJDT0FGIiwgQ09BRi50cmltKCkpOw0KICAgICAgICAgIHJlc3VsdExpbmUucHV0KCJTQVBSIiwgU0FQUiBhcyBTdHJpbmcpOw0KICAgICAgICANCiAgICAgICAgICBpZihibG9ja05vLmlzTnVtYmVyKCkpIHsNCiAgICAgICAgICAgIGludCBibG9jayA9IGJsb2NrTm8gYXMgaW50Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZihibG9jayA8PSAzOTk5KSB7DQogICAgICAgICAgICAgIHJlc3VsdExpbmUucHV0KCJUWVBFIiwgIjEiKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHJlc3VsdExpbmUucHV0KCJUWVBFIiwgIjIiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICByZXN1bHRMaW5lLnB1dCgiVFlQRSIsICIxIik7DQogICAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgDQogICAgICAgICAgbGluZXMuYWRkKHJlc3VsdExpbmUpOw0KICAgICAgICAgIA0KICAgICAgICAgIGlmKERMSVggPT0gbGluZURMSVgpIHsNCiAgICAgICAgICAgIGRlbGl2ZXJ5bGluZXMuYWRkKHJlc3VsdExpbmUpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSk7DQogICAgDQogICAgaW5zZXJ0RGF0YVRvRVhURDM2KENPTk8sIERMSVgsIGRlbGl2ZXJ5bGluZXMpOyAgDQogICAgaW5zZXJ0RGF0YVRvRVhUNDM2KENPTk8sIENPTk4sIGxpbmVzKTsNCiAgICANCiAgICBwcm9jZXNzU29ydGVkRGF0YVNpbmdsZShDT05PLCBETElYLCByb3dTaXplKTsNCiAgICBwcm9jZXNzU29ydGVkRGF0YUFsbChDT05PLCBDT05OLCByb3dTaXplKTsNCiAgIA0KICAgIGNvbXB1dGVUb3RhbFBhZ2VFWFREMzQoQ09OTywgRExJWCk7DQogICAgY29tcHV0ZVRvdGFsUGFnZUVYVDQzNChDT05PLCBDT05OKTsNCiAgfQ0KICANCiAgLyoqDQogICAqIEdldCB0b3RhbCBudW1iZXIgb2YgcGFnZXMgZm9yIEVYVDQzNA0KICAgKiBAcGFyYW1zIENPTk8gLSBJbnB1dCBDT05PDQogICAqIEBwYXJhbXMgQ09OTiAtIElucHV0IHNoaXBtZW50IG51bWJlcg0KICAgKiBAcmV0dXJuIG5vdGhpbmcNCiAgKi8NCiAgdm9pZCBjb21wdXRlVG90YWxQYWdlRVhUNDM0KGludCBDT05PLCBpbnQgQ09OTikgew0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkVYVDQzNCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiRVhDT05BIiwgIkVYQ09BRiIsICJFWFRZUEUiLCAiRVhQQUdFIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5jcmVhdGVDb250YWluZXIoKTsNCiAgICBjb250YWluZXIuc2V0KCJFWENPTk8iLCBDT05PKTsNCiAgICBjb250YWluZXIuc2V0KCJFWENPTk4iLCBDT05OKTsNCiAgIA0KICAgIFN0cmluZyBjdXJyQ09OQSA9IG51bGw7DQogICAgU3RyaW5nIGN1cnJDT0FGID0gbnVsbDsNCiAgICBpbnQgY3RyID0gMDsNCiAgIA0KICAgIHF1ZXJ5LnJlYWRBbGwoY29udGFpbmVyLCAyLCBNQVhfUkVDT1JEUywgeyBEQkNvbnRhaW5lciBkYXRhIC0+DQogICAgICBNYXAgcmVzdWx0ID0gbmV3IEhhc2hNYXAoKTsgDQogICAgICANCiAgICAgIFN0cmluZyBDT05BID0gZGF0YS5nZXQoIkVYQ09OQSIpOw0KICAgICAgU3RyaW5nIENPQUYgPSBkYXRhLmdldCgiRVhDT0FGIik7DQogICAgICANCiAgICAgIGlmKGN1cnJDT05BID09IG51bGwgJiYgY3VyckNPQUYgPT0gbnVsbCkgew0KICAgICAgICBjdXJyQ09OQSA9IENPTkE7DQogICAgICAgIGN1cnJDT0FGID0gQ09BRjsNCiAgICAgIH0NCiAgICAgIA0KICAgICAgaWYoIWN1cnJDT05BLmVxdWFscyhDT05BKSB8fCAoY3VyckNPTkEuZXF1YWxzKENPTkEpICYmICFjdXJyQ09BRi5lcXVhbHMoQ09BRikpKSB7DQogICAgICAgIHVwZGF0ZU1heFBhZ2VFWFQ0MzQoQ09OTywgQ09OTiwgY3VyckNPTkEsIGN1cnJDT0FGLCBjdHIpOw0KICAgICAgICBjdHIgPSAwOw0KICAgICAgICBjdXJyQ09OQSA9IENPTkE7DQogICAgICAgIGN1cnJDT0FGID0gQ09BRjsNCiAgICAgIH0gDQogICAgICANCiAgICAgIGN0cisrOw0KICAgIH0pOw0KICAgIA0KICAgIHVwZGF0ZU1heFBhZ2VFWFQ0MzQoQ09OTywgQ09OTiwgY3VyckNPTkEsIGN1cnJDT0FGLCBjdHIpOw0KICB9DQogIA0KICAvKioNCiAgICogVXBkYXRlIE1YUEcsIERQR04gaW4gRVhUNDM0IFRhYmxlDQogICAqIEBwYXJhbXMgQ09OTyAtIElucHV0IENPTk8NCiAgICogQHBhcmFtcyBDT05OIC0gSW5wdXQgc2hpcG1lbnQgbnVtYmVyDQogICAqIEBwYXJhbXMgQ09OQSAtIElucHV0IGNvbnNpZ25lZSBudW1iZXINCiAgICogQHBhcmFtcyB2YWwgLSBJbnB1dCB0b3RhbCBwYWdlcw0KICAgKiBAcmV0dXJuIG5vdGhpbmcNCiAgKi8NCiAgdm9pZCB1cGRhdGVNYXhQYWdlRVhUNDM0KGludCBDT05PLCBpbnQgQ09OTiwgU3RyaW5nIENPTkEsIFN0cmluZyBDT0FGLCBpbnQgdmFsKSB7DQogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiRVhUNDM0IikuaW5kZXgoIjAwIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXIgPSBxdWVyeS5nZXRDb250YWluZXIoKTsNCiAgICBjb250YWluZXIuc2V0KCJFWENPTk8iLCBDT05PKTsNCiAgICBjb250YWluZXIuc2V0KCJFWENPTk4iLCBDT05OKTsNCiAgICBjb250YWluZXIuc2V0KCJFWENPTkEiLCBDT05BKTsNCiAgICBjb250YWluZXIuc2V0KCJFWENPQUYiLCBDT0FGKTsNCiAgICANCiAgICBpbnQgY3RyID0gMTsNCiAgICANCiAgICBDbG9zdXJlPD8+IHVwZGF0ZUNhbGxCYWNrID0geyBMb2NrZWRSZXN1bHQgbG9ja2VkUmVzdWx0IC0+DQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWE1YUEciLCB2YWwpOw0KICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhEUEdOIiwgY3RyKTsNCiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYQ0hOTyIsIChpbnQpbG9ja2VkUmVzdWx0LmdldCgiRVhDSE5PIikgKyAxKTsNCiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYTE1EVCIsIExvY2FsRGF0ZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKSk7DQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWENISUQiLCBwcm9ncmFtLmdldFVzZXIoKSk7DQogICAgICANCiAgICAgIGxvY2tlZFJlc3VsdC51cGRhdGUoKTsNCiAgICAgIGN0cisrOw0KICAgIH07DQogICAgDQogICAgcXVlcnkucmVhZEFsbExvY2soY29udGFpbmVyLCA0LCB1cGRhdGVDYWxsQmFjayk7DQogIH0NCiAgDQogIC8qKg0KICAgKiBHZXQgdG90YWwgbnVtYmVyIG9mIHBhZ2VzIGZvciBFWFQ0MzQNCiAgICogQHBhcmFtcyBDT05PIC0gSW5wdXQgQ09OTw0KICAgKiBAcGFyYW1zIENPTk4gLSBJbnB1dCBzaGlwbWVudCBudW1iZXINCiAgICogQHJldHVybiBub3RoaW5nDQogICovDQogIHZvaWQgY29tcHV0ZVRvdGFsUGFnZUVYVEQzNChpbnQgQ09OTywgbG9uZyBETElYKSB7DQogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiRVhURDM0IikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJFWENPTkEiLCAiRVhDT0FGIiwgIkVYVFlQRSIsICJFWFBBR0UiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmNyZWF0ZUNvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTyIsIENPTk8pOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYRExJWCIsIERMSVgpOw0KICAgDQogICAgU3RyaW5nIGN1cnJDT05BID0gbnVsbDsNCiAgICBpbnQgY3RyID0gMDsNCiAgICBTdHJpbmcgY3VyckNPQUYgPSBudWxsOw0KICAgDQogICAgcXVlcnkucmVhZEFsbChjb250YWluZXIsIDIsIE1BWF9SRUNPUkRTLCB7IERCQ29udGFpbmVyIGRhdGEgLT4NCiAgICAgIE1hcCByZXN1bHQgPSBuZXcgSGFzaE1hcCgpOyANCiAgICAgIA0KICAgICAgU3RyaW5nIENPTkEgPSBkYXRhLmdldCgiRVhDT05BIik7DQogICAgICBTdHJpbmcgQ09BRiA9IGRhdGEuZ2V0KCJFWENPQUYiKTsNCiAgICAgIA0KICAgICAgaWYoY3VyckNPTkEgPT0gbnVsbCAmJiBjdXJyQ09BRiA9PSBudWxsKSB7DQogICAgICAgIGN1cnJDT05BID0gQ09OQTsNCiAgICAgICAgY3VyckNPQUYgPSBDT0FGOw0KICAgICAgfQ0KICAgICAgDQogICAgICBpZighY3VyckNPTkEuZXF1YWxzKENPTkEpIHx8IChjdXJyQ09OQS5lcXVhbHMoQ09OQSkgJiYgIWN1cnJDT0FGLmVxdWFscyhDT0FGKSkpIHsNCiAgICAgICAgdXBkYXRlTWF4UGFnZUVYVEQzNChDT05PLCBETElYLCBjdXJyQ09OQSwgY3VyckNPQUYsIGN0cik7DQogICAgICAgIGN0ciA9IDA7DQogICAgICAgIGN1cnJDT05BID0gQ09OQTsNCiAgICAgICAgY3VyckNPQUYgPSBDT0FGOw0KICAgICAgfQ0KICAgICAgDQogICAgICBjdHIrKzsNCiAgICB9KTsNCiAgICANCiAgICB1cGRhdGVNYXhQYWdlRVhURDM0KENPTk8sIERMSVgsIGN1cnJDT05BLCBjdXJyQ09BRiwgY3RyKTsNCiAgfQ0KICANCiAgLyoqDQogICAqIFVwZGF0ZSBNWFBHLCBEUEdOIGluIEVYVDQzNCBUYWJsZQ0KICAgKiBAcGFyYW1zIENPTk8gLSBJbnB1dCBDT05PDQogICAqIEBwYXJhbXMgQ09OTiAtIElucHV0IHNoaXBtZW50IG51bWJlcg0KICAgKiBAcGFyYW1zIENPTkEgLSBJbnB1dCBjb25zaWduZWUgbnVtYmVyDQogICAqIEBwYXJhbXMgdmFsIC0gSW5wdXQgdG90YWwgcGFnZXMNCiAgICogQHJldHVybiBub3RoaW5nDQogICovDQogIHZvaWQgdXBkYXRlTWF4UGFnZUVYVEQzNChpbnQgQ09OTywgbG9uZyBETElYLCBTdHJpbmcgQ09OQSwgU3RyaW5nIENPQUYsIGludCB2YWwpIHsNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJFWFREMzQiKS5pbmRleCgiMDAiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTyIsIENPTk8pOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYRExJWCIsIERMSVgpOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OQSIsIENPTkEpOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYQ09BRiIsIENPQUYpOw0KICAgIA0KICAgIGludCBjdHIgPSAxOw0KICAgIA0KICAgIENsb3N1cmU8Pz4gdXBkYXRlQ2FsbEJhY2sgPSB7IExvY2tlZFJlc3VsdCBsb2NrZWRSZXN1bHQgLT4NCiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYTVhQRyIsIHZhbCk7DQogICAgICBsb2NrZWRSZXN1bHQuc2V0KCJFWERQR04iLCBjdHIpOw0KICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhDSE5PIiwgKGludClsb2NrZWRSZXN1bHQuZ2V0KCJFWENITk8iKSArIDEpOw0KICAgICAgbG9ja2VkUmVzdWx0LnNldCgiRVhMTURUIiwgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKTsNCiAgICAgIGxvY2tlZFJlc3VsdC5zZXQoIkVYQ0hJRCIsIHByb2dyYW0uZ2V0VXNlcigpKTsNCiAgICAgIA0KICAgICAgbG9ja2VkUmVzdWx0LnVwZGF0ZSgpOw0KICAgICAgY3RyKys7DQogICAgfTsNCiAgICANCiAgICBxdWVyeS5yZWFkQWxsTG9jayhjb250YWluZXIsIDQsIHVwZGF0ZUNhbGxCYWNrKTsNCiAgfQ0KICANCiAgLyoqDQogICAqIFByb2Nlc3Mgc29ydGVkIGRhdGEgZnJvbSBFWFQ0MzYgYW5kIGNvbXB1dGUgcGFnZSBudW1iZXINCiAgICogQHBhcmFtcyBDT05PIC0gSW5wdXQgY29tcGFueQ0KICAgKiBAcGFyYW1zIENPTk4gLSBJbnB1dCBzaGlwbWVudCBudW1iZXINCiAgICogQHBhcmFtcyByb3dTaXplIC0gSW5wdXQgcm93IHNpemUNCiAgICogQHJldHVybiBub3RoaW5nDQogICovDQogIHZvaWQgcHJvY2Vzc1NvcnRlZERhdGFBbGwoaW50IENPTk8sIGludCBDT05OLCBpbnQgcm93U2l6ZSkgew0KICAgIERCQWN0aW9uIHNvcnRlZFF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkVYVDQzNiIpLmluZGV4KCIwMCIpLnNlbGVjdEFsbEZpZWxkcygpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgc29ydGVkQ29udGFpbmVyID0gc29ydGVkUXVlcnkuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgc29ydGVkQ29udGFpbmVyLnNldCgiRVhDT05PIiwgQ09OTyk7DQogICAgc29ydGVkQ29udGFpbmVyLnNldCgiRVhDT05OIiwgQ09OTik7DQogICAgDQogICAgQXJyYXlMaXN0PE1hcDxTdHJpbmcsIFN0cmluZz4+IGxpbmVzID0gbmV3IEFycmF5TGlzdDxNYXA8U3RyaW5nLCBTdHJpbmc+PigpOw0KICAgIGludCBjdHIgPSAxOw0KICAgIGludCBwYWdlTnVtID0gMTsNCiAgICANCiAgICBTdHJpbmcgY3VyckNPTkEgPSBudWxsOw0KICAgIGludCBjdXJyVHlwZSA9IC0xOw0KICAgIFN0cmluZyBjdXJyQ09BRiA9IG51bGw7DQogICAgDQogICAgREJBY3Rpb24gbGluZVF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkVYVDQzNSIpLmluZGV4KCIwMCIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgbGluZUNvbnRhaW5lciA9IGxpbmVRdWVyeS5jcmVhdGVDb250YWluZXIoKTsNCiAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhDT05PIiwgQ09OTyk7DQogICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQ09OTiIsIENPTk4pOw0KICAgIA0KICAgIERCQWN0aW9uIGhlYWRRdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJFWFQ0MzQiKS5pbmRleCgiMDAiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGhlYWRDb250YWluZXIgPSBoZWFkUXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgaGVhZENvbnRhaW5lci5zZXQoIkVYQ09OTyIsIENPTk8pOw0KICAgIGhlYWRDb250YWluZXIuc2V0KCJFWENPTk4iLCBDT05OKTsNCiAgICAgIA0KICAgIHNvcnRlZFF1ZXJ5LnJlYWRBbGwoc29ydGVkQ29udGFpbmVyLCAyLCBNQVhfUkVDT1JEUywgeyBEQkNvbnRhaW5lciBzb3J0ZWREYXRhIC0+DQogICAgICBTdHJpbmcgQ09OQSA9IHNvcnRlZERhdGEuZ2V0KCJFWENPTkEiKTsNCiAgICAgIGludCBUWVBFID0gc29ydGVkRGF0YS5nZXQoIkVYVFlQRSIpOw0KICAgICAgU3RyaW5nIENPQUYgPSBzb3J0ZWREYXRhLmdldCgiRVhDT0FGIik7DQogICAgICANCiAgICAgIGlmKGN1cnJDT05BID09IG51bGwgJiYgY3VyclR5cGUgPT0gLTEgJiYgY3VyckNPQUYgPT0gbnVsbCkgew0KICAgICAgICBjdXJyQ09OQSA9IENPTkE7DQogICAgICAgIGN1cnJUeXBlID0gVFlQRTsNCiAgICAgICAgY3VyckNPQUYgPSBDT0FGOw0KICAgICAgfQ0KICAgICAgDQogICAgICBpZighY3VyckNPTkEuZXF1YWxzKENPTkEpIHx8IChjdXJyQ09OQS5lcXVhbHMoQ09OQSkgJiYgY3VyclR5cGUgIT0gVFlQRSkgfHwgKGN1cnJDT05BLmVxdWFscyhDT05BKSAmJiAhY3VyckNPQUYuZXF1YWxzKENPQUYpKSkgew0KICAgICAgICBjdHIgPSAxOw0KICAgICAgICBwYWdlTnVtID0gMTsNCiAgICAgICAgY3VyckNPTkEgPSBDT05BOw0KICAgICAgICBjdXJyVHlwZSA9IFRZUEU7DQogICAgICAgIGN1cnJDT0FGID0gQ09BRjsNCiAgICAgIH0NCiAgICAgIA0KICAgICAgaWYoY3RyID4gcm93U2l6ZSkgew0KICAgICAgICBjdHIgPSAxOw0KICAgICAgICBwYWdlTnVtKys7DQogICAgICB9DQogICAgICANCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWE9STk8iLCBzb3J0ZWREYXRhLmdldCgiRVhPUk5PIikpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYUE9OUiIsIHNvcnRlZERhdGEuZ2V0KCJFWFBPTlIiKSk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhETElYIiwgc29ydGVkRGF0YS5nZXQoIkVYRExJWCIpKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWENPTkEiLCBzb3J0ZWREYXRhLmdldCgiRVhDT05BIikpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYSVROTyIsIHNvcnRlZERhdGEuZ2V0KCJFWElUTk8iKSBhcyBTdHJpbmcpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYSVROMiIsIHNvcnRlZERhdGEuZ2V0KCJFWElUTjIiKSBhcyBTdHJpbmcpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQ0ZJNCIsIHNvcnRlZERhdGEuZ2V0KCJFWENGSTQiKSk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhUWVBFIiwgc29ydGVkRGF0YS5nZXQoIkVYVFlQRSIpKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWENPTFIiLCBzb3J0ZWREYXRhLmdldCgiRVhDT0xSIikpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYU0laRSIsIHNvcnRlZERhdGEuZ2V0KCJFWFNJWkUiKSk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhQQUdFIiwgcGFnZU51bSk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhDT0FGIiwgc29ydGVkRGF0YS5nZXQoIkVYQ09BRiIpKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWFNBUFIiLCBzb3J0ZWREYXRhLmdldCgiRVhTQVBSIikpOw0KICAgICAgDQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhSR0RUIiwgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWFJHVE0iLCBMb2NhbFRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWExNRFQiLCBMb2NhbERhdGUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQ0hOTyIsIDApOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQ0hJRCIsIHByb2dyYW0uZ2V0VXNlcigpKTsNCiAgICAgIA0KICAgICAgaGVhZENvbnRhaW5lci5zZXQoIkVYQ09OQSIsIHNvcnRlZERhdGEuZ2V0KCJFWENPTkEiKSk7DQogICAgICBoZWFkQ29udGFpbmVyLnNldCgiRVhUWVBFIiwgc29ydGVkRGF0YS5nZXQoIkVYVFlQRSIpKTsNCiAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWFBBR0UiLCBwYWdlTnVtKTsNCiAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWENPQUYiLCBzb3J0ZWREYXRhLmdldCgiRVhDT0FGIikpOw0KICAgICAgDQogICAgICBoZWFkQ29udGFpbmVyLnNldCgiRVhSR0RUIiwgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKTsNCiAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWFJHVE0iLCBMb2NhbFRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpKTsNCiAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWExNRFQiLCBMb2NhbERhdGUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpOw0KICAgICAgaGVhZENvbnRhaW5lci5zZXQoIkVYQ0hOTyIsIDApOw0KICAgICAgaGVhZENvbnRhaW5lci5zZXQoIkVYQ0hJRCIsIHByb2dyYW0uZ2V0VXNlcigpKTsNCiAgICAgIA0KICAgICAgbGluZVF1ZXJ5Lmluc2VydChsaW5lQ29udGFpbmVyKTsNCiAgICAgIGhlYWRRdWVyeS5pbnNlcnQoaGVhZENvbnRhaW5lcik7DQogICAgICANCiAgICAgIGN0cisrOw0KICAgIH0pOw0KICB9DQogIA0KICAvKioNCiAgICogUHJvY2VzcyBzb3J0ZWQgZGF0YSBmcm9tIEVYVDQzNiBhbmQgY29tcHV0ZSBwYWdlIG51bWJlcg0KICAgKiBAcGFyYW1zIENPTk8gLSBJbnB1dCBjb21wYW55DQogICAqIEBwYXJhbXMgQ09OTiAtIElucHV0IHNoaXBtZW50IG51bWJlcg0KICAgKiBAcGFyYW1zIHJvd1NpemUgLSBJbnB1dCByb3cgc2l6ZQ0KICAgKiBAcmV0dXJuIG5vdGhpbmcNCiAgKi8NCiAgdm9pZCBwcm9jZXNzU29ydGVkRGF0YVNpbmdsZShpbnQgQ09OTywgbG9uZyBETElYLCBpbnQgcm93U2l6ZSkgew0KICAgIERCQWN0aW9uIHNvcnRlZFF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkVYVEQzNiIpLmluZGV4KCIwMCIpLnNlbGVjdEFsbEZpZWxkcygpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgc29ydGVkQ29udGFpbmVyID0gc29ydGVkUXVlcnkuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgc29ydGVkQ29udGFpbmVyLnNldCgiRVhDT05PIiwgQ09OTyk7DQogICAgc29ydGVkQ29udGFpbmVyLnNldCgiRVhETElYIiwgRExJWCk7DQogICAgDQogICAgQXJyYXlMaXN0PE1hcDxTdHJpbmcsIFN0cmluZz4+IGxpbmVzID0gbmV3IEFycmF5TGlzdDxNYXA8U3RyaW5nLCBTdHJpbmc+PigpOw0KICAgIGludCBjdHIgPSAxOw0KICAgIGludCBwYWdlTnVtID0gMTsNCiAgICANCiAgICBTdHJpbmcgY3VyckNPTkEgPSBudWxsOw0KICAgIGludCBjdXJyVHlwZSA9IC0xOw0KICAgIFN0cmluZyBjdXJyQ09BRiA9IG51bGw7DQogICAgDQogICAgREJBY3Rpb24gbGluZVF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkVYVEQzNSIpLmluZGV4KCIwMCIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgbGluZUNvbnRhaW5lciA9IGxpbmVRdWVyeS5jcmVhdGVDb250YWluZXIoKTsNCiAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhDT05PIiwgQ09OTyk7DQogICAgbGluZUNvbnRhaW5lci5zZXQoIkVYRExJWCIsIERMSVgpOw0KICAgIA0KICAgIERCQWN0aW9uIGhlYWRRdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJFWFREMzQiKS5pbmRleCgiMDAiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGhlYWRDb250YWluZXIgPSBoZWFkUXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgaGVhZENvbnRhaW5lci5zZXQoIkVYQ09OTyIsIENPTk8pOw0KICAgIGhlYWRDb250YWluZXIuc2V0KCJFWERMSVgiLCBETElYKTsNCiAgICAgIA0KICAgIHNvcnRlZFF1ZXJ5LnJlYWRBbGwoc29ydGVkQ29udGFpbmVyLCAyLCBNQVhfUkVDT1JEUywgeyBEQkNvbnRhaW5lciBzb3J0ZWREYXRhIC0+DQogICAgICBTdHJpbmcgQ09OQSA9IHNvcnRlZERhdGEuZ2V0KCJFWENPTkEiKTsNCiAgICAgIGludCBUWVBFID0gc29ydGVkRGF0YS5nZXQoIkVYVFlQRSIpOw0KICAgICAgU3RyaW5nIENPQUYgPSBzb3J0ZWREYXRhLmdldCgiRVhDT0FGIik7DQogICAgICANCiAgICAgIGlmKGN1cnJDT05BID09IG51bGwgJiYgY3VyclR5cGUgPT0gLTEgJiYgY3VyckNPQUYgPT0gbnVsbCkgew0KICAgICAgICBjdXJyQ09OQSA9IENPTkE7DQogICAgICAgIGN1cnJUeXBlID0gVFlQRTsNCiAgICAgICAgY3VyckNPQUYgPSBDT0FGOw0KICAgICAgfQ0KICAgICAgDQogICAgICBpZighY3VyckNPTkEuZXF1YWxzKENPTkEpIHx8IChjdXJyQ09OQS5lcXVhbHMoQ09OQSkgJiYgY3VyclR5cGUgIT0gVFlQRSkgfHwgKGN1cnJDT05BLmVxdWFscyhDT05BKSAmJiAhY3VyckNPQUYuZXF1YWxzKENPQUYpKSkgew0KICAgICAgICBjdHIgPSAxOw0KICAgICAgICBwYWdlTnVtID0gMTsNCiAgICAgICAgY3VyckNPTkEgPSBDT05BOw0KICAgICAgICBjdXJyVHlwZSA9IFRZUEU7DQogICAgICAgIGN1cnJDT0FGID0gQ09BRjsNCiAgICAgIH0NCiAgICAgIA0KICAgICAgaWYoY3RyID4gcm93U2l6ZSkgew0KICAgICAgICBjdHIgPSAxOw0KICAgICAgICBwYWdlTnVtKys7DQogICAgICB9DQogICAgICANCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWE9STk8iLCBzb3J0ZWREYXRhLmdldCgiRVhPUk5PIikpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYUE9OUiIsIHNvcnRlZERhdGEuZ2V0KCJFWFBPTlIiKSk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhETElYIiwgc29ydGVkRGF0YS5nZXQoIkVYRExJWCIpKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWENPTkEiLCBzb3J0ZWREYXRhLmdldCgiRVhDT05BIikpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYSVROTyIsIHNvcnRlZERhdGEuZ2V0KCJFWElUTk8iKSBhcyBTdHJpbmcpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYSVROMiIsIHNvcnRlZERhdGEuZ2V0KCJFWElUTjIiKSBhcyBTdHJpbmcpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQ0ZJNCIsIHNvcnRlZERhdGEuZ2V0KCJFWENGSTQiKSk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhUWVBFIiwgc29ydGVkRGF0YS5nZXQoIkVYVFlQRSIpKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWENPTFIiLCBzb3J0ZWREYXRhLmdldCgiRVhDT0xSIikpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYU0laRSIsIHNvcnRlZERhdGEuZ2V0KCJFWFNJWkUiKSk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhQQUdFIiwgcGFnZU51bSk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhDT0FGIiwgc29ydGVkRGF0YS5nZXQoIkVYQ09BRiIpKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWFNBUFIiLCBzb3J0ZWREYXRhLmdldCgiRVhTQVBSIikpOw0KICAgICAgDQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhSR0RUIiwgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWFJHVE0iLCBMb2NhbFRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWExNRFQiLCBMb2NhbERhdGUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQ0hOTyIsIDApOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQ0hJRCIsIHByb2dyYW0uZ2V0VXNlcigpKTsNCiAgICAgIA0KICAgICAgaGVhZENvbnRhaW5lci5zZXQoIkVYQ09OQSIsIHNvcnRlZERhdGEuZ2V0KCJFWENPTkEiKSk7DQogICAgICBoZWFkQ29udGFpbmVyLnNldCgiRVhUWVBFIiwgc29ydGVkRGF0YS5nZXQoIkVYVFlQRSIpKTsNCiAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWFBBR0UiLCBwYWdlTnVtKTsNCiAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWENPQUYiLCBzb3J0ZWREYXRhLmdldCgiRVhDT0FGIikpOw0KICAgICAgDQogICAgICBoZWFkQ29udGFpbmVyLnNldCgiRVhSR0RUIiwgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKTsNCiAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWFJHVE0iLCBMb2NhbFRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpKTsNCiAgICAgIGhlYWRDb250YWluZXIuc2V0KCJFWExNRFQiLCBMb2NhbERhdGUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpOw0KICAgICAgaGVhZENvbnRhaW5lci5zZXQoIkVYQ0hOTyIsIDApOw0KICAgICAgaGVhZENvbnRhaW5lci5zZXQoIkVYQ0hJRCIsIHByb2dyYW0uZ2V0VXNlcigpKTsNCiAgICAgIA0KICAgICAgbGluZVF1ZXJ5Lmluc2VydChsaW5lQ29udGFpbmVyKTsNCiAgICAgIGhlYWRRdWVyeS5pbnNlcnQoaGVhZENvbnRhaW5lcik7DQogICAgICANCiAgICAgIGN0cisrOw0KICAgIH0pOw0KICB9DQogIA0KICAvKioNCiAgICogSW5zZXJ0IGRhdGEgdG8gdGhlIEVYVDQzNiB0YWJsZQ0KICAgKiBAcGFyYW1zIENPTk8gLSBJbnB1dCBjb21wYW55DQogICAqIEBwYXJhbXMgQ09OTiAtIElucHV0IHNoaXBtZW50IG51bWJlcg0KICAgKiBAcGFyYW1zIGxpbmVzIC0gY29udGFpbmluZyB0aGUgbGluZXMgdG8gYmUgaW5zZXJ0ZWQNCiAgICogQHJldHVybiBub3RoaW5nDQogICovDQogIHZvaWQgaW5zZXJ0RGF0YVRvRVhUNDM2KGludCBDT05PLCBpbnQgQ09OTiwgQXJyYXlMaXN0PE1hcDxTdHJpbmcsIFN0cmluZz4+IGxpbmVzKSB7DQogICAgREJBY3Rpb24gbGluZVF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkVYVDQzNiIpLmluZGV4KCIwMCIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgbGluZUNvbnRhaW5lciA9IGxpbmVRdWVyeS5nZXRDb250YWluZXIoKTsNCiAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhDT05PIiwgQ09OTyk7DQogICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQ09OTiIsIENPTk4pOw0KICAgIA0KICAgIGZvciAoaW50IGk9MDsgaTxsaW5lcy5zaXplKCk7IGkrKykgew0KICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiByZWNvcmQgPSAoTWFwPFN0cmluZywgU3RyaW5nPikgbGluZXNbaV07DQogICAgICANCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWERMSVgiLCByZWNvcmQuRExJWCBhcyBsb25nKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWENPTkEiLCByZWNvcmQuQ09OQSk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhPUk5PIiwgcmVjb3JkLk9STk8pOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYUE9OUiIsIHJlY29yZC5QT05SIGFzIGludCk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhJVE5PIiwgcmVjb3JkLklUTk8gYXMgU3RyaW5nKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWElUTjIiLCByZWNvcmQuSVROMiBhcyBTdHJpbmcpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQ0ZJNCIsIHJlY29yZC5DRkk0KTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWFRZUEUiLCByZWNvcmQuVFlQRSBhcyBpbnQpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQ09MUiIsIHJlY29yZC5DT0xSKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWFNJWkUiLCByZWNvcmQuU0laRSk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhDT0FGIiwgcmVjb3JkLkNPQUYpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYU0FQUiIsIHJlY29yZC5TQVBSIGFzIGRvdWJsZSk7DQogICAgICANCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWFJHRFQiLCBMb2NhbERhdGUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eU1NZGQiKSkudG9JbnRlZ2VyKCkpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYUkdUTSIsIExvY2FsVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJISG1tc3MiKSkudG9JbnRlZ2VyKCkpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYTE1EVCIsIExvY2FsRGF0ZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKSk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhDSE5PIiwgMCk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhDSElEIiwgcHJvZ3JhbS5nZXRVc2VyKCkpOw0KICAgICAgDQogICAgICBsaW5lUXVlcnkuaW5zZXJ0KGxpbmVDb250YWluZXIpOw0KICAgIH0NCiAgfQ0KICANCiAgLyoqDQogICAqIEluc2VydCBkYXRhIHRvIHRoZSBFWFQ0MzYgdGFibGUNCiAgICogQHBhcmFtcyBDT05PIC0gSW5wdXQgY29tcGFueQ0KICAgKiBAcGFyYW1zIENPTk4gLSBJbnB1dCBzaGlwbWVudCBudW1iZXINCiAgICogQHBhcmFtcyBsaW5lcyAtIGNvbnRhaW5pbmcgdGhlIGxpbmVzIHRvIGJlIGluc2VydGVkDQogICAqIEByZXR1cm4gbm90aGluZw0KICAqLw0KICB2b2lkIGluc2VydERhdGFUb0VYVEQzNihpbnQgQ09OTywgbG9uZyBETElYLCBBcnJheUxpc3Q8TWFwPFN0cmluZywgU3RyaW5nPj4gbGluZXMpIHsNCiAgICBEQkFjdGlvbiBsaW5lUXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiRVhURDM2IikuaW5kZXgoIjAwIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBsaW5lQ29udGFpbmVyID0gbGluZVF1ZXJ5LmdldENvbnRhaW5lcigpOw0KICAgIGxpbmVDb250YWluZXIuc2V0KCJFWENPTk8iLCBDT05PKTsNCiAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhETElYIiwgRExJWCk7DQogICAgDQogICAgZm9yIChpbnQgaT0wOyBpPGxpbmVzLnNpemUoKTsgaSsrKSB7DQogICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlY29yZCA9IChNYXA8U3RyaW5nLCBTdHJpbmc+KSBsaW5lc1tpXTsNCiAgICAgIA0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYQ09OQSIsIHJlY29yZC5DT05BKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWE9STk8iLCByZWNvcmQuT1JOTyk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhQT05SIiwgcmVjb3JkLlBPTlIgYXMgaW50KTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWElUTk8iLCByZWNvcmQuSVROTyBhcyBTdHJpbmcpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYSVROMiIsIHJlY29yZC5JVE4yIGFzIFN0cmluZyk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhDRkk0IiwgcmVjb3JkLkNGSTQpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYVFlQRSIsIHJlY29yZC5UWVBFIGFzIGludCk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhDT0xSIiwgcmVjb3JkLkNPTFIpOw0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYU0laRSIsIHJlY29yZC5TSVpFKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWENPQUYiLCByZWNvcmQuQ09BRik7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhTQVBSIiwgcmVjb3JkLlNBUFIgYXMgZG91YmxlKTsNCiAgICAgIA0KICAgICAgbGluZUNvbnRhaW5lci5zZXQoIkVYUkdEVCIsIExvY2FsRGF0ZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKSk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhSR1RNIiwgTG9jYWxUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKS50b0ludGVnZXIoKSk7DQogICAgICBsaW5lQ29udGFpbmVyLnNldCgiRVhMTURUIiwgTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWENITk8iLCAwKTsNCiAgICAgIGxpbmVDb250YWluZXIuc2V0KCJFWENISUQiLCBwcm9ncmFtLmdldFVzZXIoKSk7DQogICAgICANCiAgICAgIGxpbmVRdWVyeS5pbnNlcnQobGluZUNvbnRhaW5lcik7DQogICAgfQ0KICB9DQogIA0KICANCiAgLyoqDQogICAqIEdldCBNTUNGSTQgLSBCbG9jayBudW1iZXIgZnJvbSBNSVRNQVMNCiAgICogQHBhcmFtcyBDT05PIC0gSW5wdXQgY29tcGFueQ0KICAgKiBAcGFyYW1zIElUTk8gLSBJbnB1dCBpdGVtIG51bWJlcg0KICAgKiBAcmV0dXJuIGJsb2NrDQogICovDQogIFN0cmluZyBnZXRCbG9jayhpbnQgQ09OTywgU3RyaW5nIElUTk8pIHsNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNSVRNQVMiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk1NQ0ZJNCIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgY29udGFpbmVyLnNldCgiTU1DT05PIiwgQ09OTyk7DQogICAgY29udGFpbmVyLnNldCgiTU1JVE5PIiwgSVROTyk7DQogICAgDQogICAgU3RyaW5nIGJsb2NrID0gIiI7DQogICAgDQogICAgaWYgKHF1ZXJ5LnJlYWQoY29udGFpbmVyKSkgew0KICAgICAgYmxvY2sgPSBjb250YWluZXIuZ2V0KCJNTUNGSTQiKTsNCiAgICB9DQogICAgDQogICAgcmV0dXJuIGJsb2NrOw0KICB9DQogIA0KICANCiAgLyoqDQogICAqIERlbGV0ZSBhbGwgcmVjb3JkcyBkZXBlbmRpbmcgb24gQ09OTg0KICAgKiBAcGFyYW1zIENPTk8gLSBJbnB1dCBjb21wYW55DQogICAqIEBwYXJhbXMgQ09OTiAtIElucHV0IHNoaXBtZW50IG51bWJlcg0KICAgKiBAcGFyYW1zIHRhYmxlIC0gSW5wdXQgWHRlbmQgVGFibGUNCiAgICogQHJldHVybiBub3RoaW5nDQogICovDQogIHZvaWQgZGVsZXRlUmVjb3Jkc0J5Q09OTihpbnQgQ09OTywgaW50IENPTk4sIFN0cmluZyB0YWJsZSkgew0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUodGFibGUpLmluZGV4KCIwMCIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuY3JlYXRlQ29udGFpbmVyKCk7DQogICAgY29udGFpbmVyLnNldCgiRVhDT05PIiwgQ09OTyk7DQogICAgY29udGFpbmVyLnNldCgiRVhDT05OIiwgQ09OTik7DQogICAgDQogICAgQ2xvc3VyZTw/PiBkZWxldGVSZWNvcmRzID0ge0xvY2tlZFJlc3VsdCByZXN1bHQgLT4NCiAgICAgIHJlc3VsdC5kZWxldGUoKTsNCiAgICB9DQogICAgDQogICAgcXVlcnkucmVhZEFsbExvY2soY29udGFpbmVyLCAyLCBkZWxldGVSZWNvcmRzKTsNCiAgfQ0KICANCiAgLyoqDQogICAqIERlbGV0ZSBhbGwgcmVjb3JkcyBkZXBlbmRpbmcgb24gRExJWA0KICAgKiBAcGFyYW1zIENPTk8gLSBJbnB1dCBjb21wYW55DQogICAqIEBwYXJhbXMgRExJWCAtIElucHV0IGRlbGl2ZXJ5IG51bWJlcg0KICAgKiBAcGFyYW1zIHRhYmxlIC0gSW5wdXQgWHRlbmQgVGFibGUNCiAgICogQHJldHVybiBub3RoaW5nDQogICovDQogIHZvaWQgZGVsZXRlUmVjb3Jkc0J5RExJWChpbnQgQ09OTywgbG9uZyBETElYLCBTdHJpbmcgdGFibGUpIHsNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKHRhYmxlKS5pbmRleCgiMDAiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmNyZWF0ZUNvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYQ09OTyIsIENPTk8pOw0KICAgIGNvbnRhaW5lci5zZXQoIkVYRExJWCIsIERMSVggYXMgbG9uZyk7DQogICAgDQogICAgQ2xvc3VyZTw/PiBkZWxldGVSZWNvcmRzID0ge0xvY2tlZFJlc3VsdCByZXN1bHQgLT4NCiAgICAgIHJlc3VsdC5kZWxldGUoKTsNCiAgICB9DQogICAgDQogICAgcXVlcnkucmVhZEFsbExvY2soY29udGFpbmVyLCAyLCBkZWxldGVSZWNvcmRzKTsNCiAgfQ0KICANCn0="}}}